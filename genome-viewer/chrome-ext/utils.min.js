var Normalizer=new function(){this.normalizeArray=function(a){return this.standardizeArray(this.normal(a))};this.normal=function(a){var b=this._getMean(a),c=this._getStdDeviation(a);this._getMaxAndMin(a);for(var d=[],e=0;e<a.length;e++)0!=c?d.push((a[e]-b)/c):d.push(a[e]);return d};this.standardizeArray=function(a){for(var b=this._getMaxAndMin(a),c=b[0],b=b[1],c=0>=c?Math.abs(c):-1*c,d=[],e=0;e<a.length;e++)0!=b+c?d.push((a[e]+c)/(b+c)):d.push(a[e]+c);return d};this._getMean=function(a){for(var b=
0,c=0;c<a.length;c++)b+=parseFloat(a[c]);return b/a.length};this._getStdDeviation=function(a){for(var b=this._getMean(a),c=0,d=0;d<a.length;d++)c+=Math.pow(parseFloat(a[d])-b,2);return Math.sqrt(c/a.length)};this._getMaxAndMin=function(a){for(var b=Number.MAX_VALUE,c=Number.MIN_VALUE,d=0;d<a.length;d++)a[d]<b&&(b=parseFloat(a[d])),a[d]>c&&(c=parseFloat(a[d]));return[b,c]}};function Event(a){this._sender=a;this._listeners=[]}
Event.prototype={addEventListener:function(a){this._listeners.push(a)},notify:function(a){for(var b=0;b<this._listeners.length;b++)this._listeners[b](this._sender,a)}};
var Colors=new function(){function a(){var b=0,c=0,d=0,e=0,f=0,g=0;this.SetRGB=function(a,k,l){b=a/255;c=k/255;d=l/255;a=Math.max(Math.max(b,c),d);k=Math.min(Math.min(b,c),d);g=a;f=0;0!=a&&(f=1-k/a);e=0;k!=a&&(k=a-k,e=b==a?(c-d)/k:c==a?2+(d-b)/k:4+(b-c)/k,e*=60,0>e&&(e+=360))};this.Red=function(){return Math.round(255*b)};this.Green=function(){return Math.round(255*c)};this.Blue=function(){return Math.round(255*d)};this.SetHSV=function(a,k,l){e=a;f=k;g=l;d=c=b=g;if(!(0==g||0==f)){var k=e/60,a=Math.floor(k),
o=k-a,k=g*(1-f),l=g*(1-f*o),o=g*(1-f*(1-o));switch(a){case 0:b=g;c=o;d=k;break;case 1:b=l;c=g;d=k;break;case 2:b=k;c=g;d=o;break;case 3:b=k;c=l;d=g;break;case 4:b=o;c=k;d=g;break;default:b=g,c=k,d=l}}};this.Hue=function(){return e};this.Saturation=function(){return f};this.Value=function(){return g};this.SetHexString=function(a){if(null==a||"string"!=typeof a)this.SetRGB(0,0,0);else if("#"==a.substr(0,1)&&(a=a.substr(1)),6!=a.length)this.SetRGB(0,0,0);else{var b=parseInt(a.substr(0,2),16),c=parseInt(a.substr(2,
2),16),a=parseInt(a.substr(4,2),16);isNaN(b)||isNaN(c)||isNaN(a)?this.SetRGB(0,0,0):this.SetRGB(b,c,a)}};this.HexString=function(){var a=this.Red().toString(16);1==a.length&&(a="0"+a);var b=this.Green().toString(16);1==b.length&&(b="0"+b);var c=this.Blue().toString(16);1==c.length&&(c="0"+c);return("#"+a+b+c).toUpperCase()};this.Complement=function(){var b=180<=e?e-180:e+180,c=g*(f-1)+1,d=g*f/c,o=new a;o.SetHSV(b,d,c);return o}}this.hashColor=[];this.getColorByScoreArrayValue=function(a){for(var c=
[],d=0;d<a.length;d++){var e=this.getColorByScoreValue(a[d]);c.push(e)}return c};this.getHexStringByScoreArrayValue=function(a){for(var a=this.getColorByScoreArrayValue(a),c=[],d=0;d<a.length;d++)c.push(a[d].HexString());return c};this.getColorByScoreValue=function(a){var c=a.toString().substr(0,4);if(null!=this.hashColor[c])return this.hashColor[c];if(isNaN(a))return Colors.ColorFromRGB(0,0,0);var d,e,f;0.5>a?(e=Colors.ColorFromRGB(0,0,255),f=Colors.ColorFromRGB(255,255,255),d=2*a):(e=Colors.ColorFromRGB(255,
255,255),f=Colors.ColorFromRGB(255,0,0),d=2*a-1);a=d;d=1-d;e=Colors.ColorFromRGB(d*e.Red()+a*f.Red(),d*e.Green()+a*f.Green(),d*e.Blue()+a*f.Blue());return this.hashColor[c]=e};this.ColorFromHSV=function(b,c,d){var e=new a;e.SetHSV(b,c,d);return e};this.ColorFromRGB=function(b,c,d){var e=new a;e.SetRGB(b,c,d);return e};this.ColorFromHex=function(b){var c=new a;c.SetHexString(b);return c}};function StringBuffer(){this.buffer=[]}StringBuffer.prototype.append=function(a){this.buffer.push(a);return this};
StringBuffer.prototype.appendln=function(a){this.buffer.push(a+"\n");return this};StringBuffer.prototype.toString=function(){return this.buffer.join("")};
var Geometry={getAngleBetweenTwoPoints:function(a,b,c,d){return Math.atan2(d-b,c-a)},getAdjacentSideOfRectangleRight:function(a,b){return Math.abs(Math.cos(a)*b)},getOppositeSideOfRectangleRight:function(a,b){return Math.abs(Math.sin(a)*b)},toDegree:function(a){return 180*a/Math.PI}},SHAPE=0,SQUARE=1,RECTANGLE=2,ROUNDEDREC=3,CIRCLE=4,TRIANGLE=5,PANEL=6,TEXT=7,LINE=9,VERTICAL=0,HORIZONTAL=1;function Point(a,b){this.x=a;this.y=b}
Point.prototype.getDistance=function(a){var b=Math.pow(this.x-a.x,2),a=Math.pow(this.y-a.y,2);return Math.sqrt(b+a)};function Shape(a,b){this.top=a;this.left=b;this.color="#000000";this.canvas=null;this.visible=!0;this.type=SHAPE;this.borderColor="#000000";this.borderWidth=0}Shape.prototype.toString=function(){return this.type+": "+this.top+" "+this.left};Shape.prototype.setBorderColor=function(a){this.borderColor=a};Shape.prototype.setBorderWidth=function(a){this.borderWidth=a};
Shape.prototype.setColor=function(a){this.color=a};Shape.prototype.render=function(a){this.canvas=a};Shape.prototype.setVisible=function(a){this.visible=a};function Rectangle(a,b,c,d){Shape.call(this,a,b);this.width=d;this.height=c;this.type=RECTANGLE}Rectangle.prototype=new Shape;Rectangle.prototype.constructor=Rectangle;
Rectangle.prototype.render=function(a){this.visible&&(a.save(),a.lineWidth=2,a.strokeStyle="#000000",a.beginPath(),a.moveTo(this.left,this.top),a.lineTo(this.left+this.width,this.top),a.lineTo(this.left+this.width,this.top+this.height),a.lineTo(this.left,this.top+this.height),a.closePath(),a.stroke(),a.fillStyle=this.color,a.fillRect(this.left,this.top,this.width,this.height),a.restore())};Rectangle.prototype.remove=function(){this.canvas.clearRect(this.left,this.top,this.width,this.height)};
Rectangle.prototype.contains=function(a,b){return b>=this.left&&b<=this.width+this.left?a>=this.top&&a<=this.height+this.top?!0:!1:!1};function RoundedRec(a,b,c,d,e){Rectangle.call(this,b,a,d,c);this.radio=e;this.type=ROUNDEDREC}RoundedRec.prototype=new Rectangle;RoundedRec.prototype.constructor=RoundedRec;
RoundedRec.prototype.render=function(a){this.visible&&(a.save(),a.fillStyle=this.color,a.beginPath(),a.moveTo(this.left,this.top+this.radio),a.lineTo(this.left,this.top+this.height-this.radio),a.quadraticCurveTo(this.left,this.top+this.height,this.left+this.radio,this.top+this.height),a.lineTo(this.left+this.width-this.radio,this.top+this.height),a.quadraticCurveTo(this.left+this.width,this.top+this.height,this.left+this.width,this.top+this.height-this.radio),a.lineTo(this.left+this.width,this.top+
this.radio),a.quadraticCurveTo(this.left+this.width,this.top,this.left+this.width-this.radio,this.top),a.lineTo(this.left+this.radio,this.top),a.quadraticCurveTo(this.left,this.top,this.left,this.top+this.radio),a.fill(),0!=this.borderWidth&&(a.strokeStyle=this.borderColor,a.lineWidth=this.borderWidth,a.stroke()),a.restore())};function Square(a,b,c){Shape.call(this,b,a);this.width=this.height=c;this.type=SQUARE}Square.prototype=new Shape;Square.prototype.constructor=Square;
Square.prototype.remove=function(){this.canvas.clearRect(this.top,this.left,this.width,this.height)};Square.prototype.render=function(a){Shape.prototype.render.call(this,a);this.visible&&(a.save(),a.fillStyle=this.color,a.fillRect(this.top,this.left,this.width,this.height),0!=this.borderWidth&&(a.strokeStyle=this.borderColor,a.lineWidth=this.borderWidth,a.strokeRect(this.top,this.left,this.width,this.height)),a.restore())};
Square.prototype.contains=function(a,b){return b>=this.left&&b<=this.width+this.left?a>=this.top&&a<=this.height+this.top?!0:!1:!1};function Circle(a,b,c){Shape.call(this,b,a);this.radio=c;this.type=CIRCLE}Circle.prototype=new Shape;Circle.prototype.constructor=Circle;
Circle.prototype.render=function(a){Shape.prototype.render.call(this,a);this.visible&&(a.save(),a.beginPath(),a.fillStyle=this.color,a.arc(this.top+this.radio,this.left+this.radio,this.radio,0,2*Math.PI,!0),0!=this.borderWidth&&(a.strokeStyle=this.borderColor,a.lineWidth=this.borderWidth,a.stroke()),a.closePath(),a.fill(),a.restore())};Circle.prototype.contains=function(a,b){return(new Point(a,b)).getDistance(new Point(this.top+this.radio,this.left+this.radio))<=this.radio?!0:!1};
function Triangle(a,b,c,d,e,f){Shape.call(this,a,b);this.x1=a;this.y1=b;this.x2=c;this.y2=d;this.x3=e;this.y3=f;this.type=TRIANGLE}Triangle.prototype=new Shape;Triangle.prototype.constructor=Triangle;Triangle.prototype.render=function(a){this.visible&&(a.save(),a.fillStyle=this.color,a.beginPath(),a.moveTo(this.x1,this.y1),a.lineTo(this.x2,this.y2),a.lineTo(this.x3,this.y3),a.closePath(),a.fill(),0!=this.borderWidth&&(a.strokeStyle=this.borderColor,a.lineWidth=this.borderWidth,a.stroke()),a.restore())};
Triangle.prototype.toString=function(){return this.type};Triangle.prototype.contains=function(){return!1};function Text(a,b,c){Shape.call(this,b,a);this.text=c;this.type=TEXT;this.orientation=HORIZONTAL}function Text(a,b,c,d){Shape.call(this,a,b);this.text=c;this.type=TEXT;this.orientation=d}Text.prototype=new Shape;Text.prototype.constructor=Text;Text.prototype.setFont=function(a){this.font=a};
Text.prototype.render=function(a){a.save();a.fillStyle=this.color;a.font=this.font;a.textBaseline="top";a.measureText(this.text);this.orientation!=HORIZONTAL&&(a.rotate(-Math.PI/2),a.translate(-this.top,this.left));a.fillText(this.text,0,0);a.restore()};function Line(a,b){Shape.call(this,a.x,a.y);this.point=b;this.type=LINE;this.color="#FFCCFF"}Line.prototype=new Shape;Line.prototype.constructor=Line;Line.prototype.remove=function(){this.canvas.clearRect(this.top,this.left,1,1)};
Line.prototype.render=function(a){Shape.prototype.render.call(this,a);a.save();a.fillStyle=this.color;a.beginPath();a.moveTo(this.left,this.top);a.lineTo(this.point.x,this.point.y);a.closePath();a.stroke();a.restore()};
var SVG={svgns:"http://www.w3.org/2000/svg",xlinkns:"http://www.w3.org/1999/xlink",createSVGCanvas:function(a,b){b.push(["xmlns",SVG.svgns],["xmlns:xlink","http://www.w3.org/1999/xlink"]);var c=document.createElementNS("http://www.w3.org/2000/svg","svg");this._setProperties(c,b);a.appendChild(c);return c},createRectangle:function(a,b,c,d,e){var f=document.createElementNS(this.svgns,"rect");f.setAttribute("x",a);f.setAttribute("y",b);f.setAttribute("width",c);f.setAttribute("height",d);SVG._setProperties(f,
e);return f},drawImage64:function(a,b,c,d,e,f,g){a=SVG.createImage64(a,b,c,d,e,g);f.appendChild(a);return a},createImage64:function(a,b,c,d,e,f){var g=document.createElementNS(this.svgns,"image");g.setAttribute("x",a);g.setAttribute("y",b);g.setAttribute("width",c);g.setAttribute("height",d);g.setAttribute("xlink:href",e);SVG._setProperties(g,f);return g},createLine:function(a,b,c,d,e){var f=document.createElementNS(this.svgns,"line");f.setAttribute("x1",a);f.setAttribute("y1",b);f.setAttribute("x2",
c);f.setAttribute("y2",d);SVG._setProperties(f,e);return f},createClip:function(a,b){var c=document.createElementNS(this.svgns,"clipPath");c.setAttribute("id",a);c.appendChild(b);return c},drawClip:function(a,b,c){a=SVG.createClip(a,b);c.appendChild(a);return a},drawRectangle:function(a,b,c,d,e,f){try{var g=SVG.createRectangle(a,b,c,d,f);e.appendChild(g)}catch(h){console.log("-------------------- "),console.log("Error on drawRectangle "+h),console.log(f),console.log("-------------------- ")}return g},
createEllipse:function(a,b,c,d,e){var f=document.createElementNS(this.svgns,"ellipse");f.setAttribute("cx",a);f.setAttribute("cy",b);f.setAttribute("rx",c);f.setAttribute("ry",d);SVG._setProperties(f,e);return f},drawEllipse:function(a,b,c,d,e,f){a=SVG.createEllipse(a,b,c,d,f);e.appendChild(a);return a},drawImage:function(a,b,c,d){var e=document.createElementNS(this.svgns,"image");e.setAttribute("x",a);e.setAttribute("y",b);c.appendChild(e);SVG._setProperties(e,d)},drawLine:function(a,b,c,d,e,f){try{var g=
SVG.createLine(a,b,c,d,f);e.appendChild(g)}catch(h){debugger}return g},drawPath:function(a,b,c){a=SVG.createPath(a,c);b.appendChild(a);return a},createPoligon:function(a,b){var c=document.createElementNS(this.svgns,"polygon");c.setAttribute("points",a);SVG._setProperties(c,b);return c},drawPoligon:function(a,b,c){a=SVG.createPoligon(a,c);b.appendChild(a);return a},createPath:function(a,b){var c=document.createElementNS(this.svgns,"path");c.setAttribute("d",a);SVG._setProperties(c,b);return c},drawCircle:function(a,
b,c,d,e){var f=document.createElementNS(this.svgns,"circle");f.setAttribute("cx",a);f.setAttribute("cy",b);f.setAttribute("r",c);d.appendChild(f);this._setProperties(f,e);return f},_setProperties:function(a,b){if(b instanceof Array)for(var c=0;c<b.length;c++)a.setAttribute(b[c][0],b[c][1]);else for(c in b)a.setAttribute(c,b[c])},createText:function(a,b,c,d){var e=document.createElementNS(this.svgns,"text");e.setAttributeNS(null,"x",a);e.setAttributeNS(null,"y",b);a=document.createTextNode(c);e.appendChild(a);
this._setProperties(e,d);return e},drawText:function(a,b,c,d,e){c=SVG.createText(a,b,c,e);d.appendChild(c);return c},drawGroup:function(a,b){var c=SVG.createGroup(b);a.appendChild(c);return c},createGroup:function(a){var b=document.createElementNS(this.svgns,"g");this._setProperties(b,a);return b}},CanvasToSVG={convert:function(a,b,c,d,e,f){a=this._convert(a,b,c,d,e);for(b=0;b<f.length;b++)a.setAttribute(f[b][0],f[b][1])},_convert:function(a,b,c,d,e){var f=a.toDataURL(),g=document.createElementNS("http://www.w3.org/2000/svg",
"image");g.setAttribute("id",e);g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);g.setAttribute("x",c?c:0);g.setAttribute("y",d?d:0);g.setAttribute("width",a.width);g.setAttribute("height",a.height);g.imageData=f;b.appendChild(g);return g},importSVG:function(a,b){svg_xml=a;var c=b.getContext("2d"),d=new Image;d.src="data:image/svg+xml;base64,"+btoa(svg_xml);c.drawImage(d,0,0)}},userUI=new function(){this.clientMessages={info:[],warning:[],error:[]};this.getUser=function(){return wc_getFullUser()};
this.getUserInfo=function(){return wc_getUserInfo()};this.getServerMessages=function(){return wc_getMessages()};this.getClientMessages=function(){return this.clientMessages};this.addWarningMessage=function(a){this.clientMessages.warning.push(a)};this.addErrorMessage=function(a){this.clientMessages.error.push(a)};this.addInfoMessage=function(a){this.clientMessages.info.push(a)};this.clearAllClientMessages=function(){this.clientMessages={info:[],warning:[],error:[]}};this.getData=function(){return wc_getOwnedDataList()};
this.getJobData=function(a){var b=wc_getOwnedDataList(),c=[];if(null==b)return c;for(var d=0;d<b.length;d++)b[d].jobId==a&&c.push(b[d]);return c}};function getSO(){var a=window.navigator.appVersion.toLowerCase(),b="Unknown";-1!=a.indexOf("win")?b="Windows":-1!=a.indexOf("x11")?b="Linux":-1!=a.indexOf("mac")&&(b="Macintosh");return b}
var Browser={getappCodeName:function(){return navigator.appCodeName},getappVersion:function(){return navigator.appVersion},cookieEnabled:function(){return navigator.cookieEnabled},getPlatform:function(){return navigator.platform},getuserAgent:function(){return navigator.userAgent}};function getBrowser(){var a="",b="";$.each($.browser,function(c,d){"version"==c&&(a=d);!0==d&&(b=c)});return"Browser: "+b+" V."+a}
function getBrowserName(){var a="";$.each($.browser,function(b,c){!0==c&&(a=b)});return a}var Config=function(a){this.save=function(){$.cookie(a,JSON.stringify(this))};this.finalize=function(){$.cookie(a,null)};this.set=function(a,b){this[a]=b;this.save()};this.get=function(a){return this[a]};if(null!=$.cookie(a)){var b=JSON.parse($.cookie(a)),c;for(c in b)"save"!=c&&"finalize"!=c&&"get"!=c&&"set"!=c&&(this[c]=b[c])}this.save()};
function getSO(){var a=window.navigator.appVersion.toLowerCase(),b="Unknown";-1!=a.indexOf("win")?b="Windows":-1!=a.indexOf("x11")?b="Linux":-1!=a.indexOf("mac")&&(b="Macintosh");return b}Browser={getappCodeName:function(){return navigator.appCodeName},getappVersion:function(){return navigator.appVersion},cookieEnabled:function(){return navigator.cookieEnabled},getPlatform:function(){return navigator.platform},getuserAgent:function(){return navigator.userAgent}};
function getBrowser(){var a="",b="";$.each($.browser,function(c,d){"version"==c&&(a=d);!0==d&&(b=c)});return"Browser: "+b+" V."+a}function getBrowserName(){var a="";$.each($.browser,function(b,c){!0==c&&(a=b)});return a}
var Config=function(a){this.save=function(){$.cookie(a,JSON.stringify(this))};this.finalize=function(){$.cookie(a,null)};this.set=function(a,b){this[a]=b;this.save()};this.get=function(a){return this[a]};if(null!=$.cookie(a)){var b=JSON.parse($.cookie(a)),c;for(c in b)"save"!=c&&"finalize"!=c&&"get"!=c&&"set"!=c&&(this[c]=b[c])}this.save()},PUBMED_RSS,BIOINFO_RSS,FEED_OBJECT,NUMBER_OF_FEEDS=0;
function initFeedUrls(){PUBMED_RSS={babelomics:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=18A2e0_HeVtQ9k4iNuwfZFSuh5Ck38BCLWW3Wrlll4hWvJ8AtH",gepas:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1JKSd2KF3MGnV8mU6zDJ5PPH9-xMKOjyzBOmIeDyef9oPjR19C",fatigo:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=14GVrEVieJsBLt8q3l7R_YRQF8Tljz7pDcLCPmsBXT7C3vcMrI",fatiscan:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=18ervbTh5AP3vfhgpfpT8nuS-nlu-HGIjZU1IFPR3fJ15OKAOb",
gesbap:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1Rkszs2HVZ2QHM3VV-sfTuWBxZ3syAewBayCSYb3ariok2b1DW",genecodis:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1h7Su3P88Y-s0IJD2PR7EPdYjWx0n1H8LGb-Zm150P3-TFVERh",blast2go:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1HC7gWvsJppOwqCZp0h91Mvqp-QMP15A6Y7Qg2jKNZy3Ap4gfa",snow:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1FU_ZGTY7E6tYYsWpRpUfCUmW163CN4E08cHCccdpHbJvTmgv7"};BIOINFO_RSS=
{babelomics:"http://bioinfo.cipf.es/taxonomy/term/53/feed/xml",gepas:"http://bioinfo.cipf.es/taxonomy/term/52/feed/xml",fatiscan:"http://bioinfo.cipf.es/taxonomy/term/65/feed/xml",snow:"http://bioinfo.cipf.es/taxonomy/term/50/feed/xml"}}
function loadFeedByTags(a,b){var c=new StringBuffer;c.append("<div id ='referencesContainer' class='feed-content'>");c.append("\t<table style='width:100%; height:100%'>");c.append("\t\t<tr valign='middle'>");c.append("\t\t\t<td align='center'>loading references...<img src='resources/images/icons/Waiting.gif' alt='' /></td>");c.append("\t\t</tr>");c.append("\t</table>");c.append("</div> ");$("#"+b+"_references").append(c.toString());a=fromTags2Urls(a);FEED_OBJECT=[];loadUrlFeeds(a,0,"referencesContainer")}
function fromTags2Urls(a){var b,c=[];if(0<a.length)for(var d=0;d<a.length;d++)b=a[d],PUBMED_RSS||initFeedUrls(),PUBMED_RSS[b]&&(c=c.concat(PUBMED_RSS[b]));return c}function loadUrlFeeds(a,b,c){$.jGFeed(a[b],function(d){null!=d&&(FEED_OBJECT=FEED_OBJECT.concat(d));b++;b<a.length?loadUrlFeeds(a,b,c):renderFeeds(c)})}
function renderFeeds(a){var b=new StringBuffer,c=[],d=[];if(null!=FEED_OBJECT&&0<FEED_OBJECT.length){for(var e=0;e<FEED_OBJECT.length;e++)for(var f=FEED_OBJECT[e],g=0;g<f.entries.length;g++){var h=f.entries[g];d[h.title]||(d[h.title]=!0,c=c.concat(f.entries[g]))}b.appendln("<div>&nbsp;</div>");b.appendln("<div>&nbsp;</div>");b.appendln("<div>&nbsp;</div>");b.append("<span class='references-title'>References</span>");b.append("<ul>");for(g=0;g<c.length;g++){h=c[g];b.append("<li>");b.append("<span>"+
h.author+". </span>");b.append("<span class='feed-content'><a href='"+h.link+"'  target='_blank'> "+h.title+"</a></span>");b.append("<span>"+h.categories+"</span>");d=h.content.split("<a");for(e=0;e<d.length;e++)f=d[e].lastIndexOf("</a>"),d[e]=d[e].substring(0,f);b.append("<div class='feed-link'><a class='text-show feed-link'>...see PubMed links</a>");b.append("\t<span class='text-hide feed-content'>");for(e=0;e<d.length;e++)null!=d[e]&&""!=d[e]&&(b.append("<a target='_blank'"),b.append(d[e]),b.append("</a>"));
b.append("\t</spam>");b.append("</div>");b.append("</li>");b.appendln("<div>&nbsp;</div>")}b.append("</ul>")}else b.append("<div class='feed-content'>no feeds found</div");$("#"+a).html(b.toString());initReadMore()}this.JSON||(this.JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=h[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var e,h,m=f,n,i=d[a];i&&"object"===typeof i&&"function"===typeof i.toJSON&&(i=i.toJSON(a));"function"===typeof k&&(i=k.call(d,a,i));switch(typeof i){case "string":return b(i);case "number":return isFinite(i)?""+i:"null";case "boolean":case "null":return""+i;
case "object":if(!i)return"null";f+=g;n=[];if("[object Array]"===Object.prototype.toString.apply(i)){h=i.length;for(a=0;a<h;a+=1)n[a]=c(a,i)||"null";d=0===n.length?"[]":f?"[\n"+f+n.join(",\n"+f)+"\n"+m+"]":"["+n.join(",")+"]";f=m;return d}if(k&&"object"===typeof k){h=k.length;for(a=0;a<h;a+=1)if(e=k[a],"string"===typeof e&&(d=c(e,i)))n.push(b(e)+(f?": ":":")+d)}else for(e in i)if(Object.hasOwnProperty.call(i,e)&&(d=c(e,i)))n.push(b(e)+(f?": ":":")+d);d=0===n.length?"{}":f?"{\n"+f+n.join(",\n"+f)+
"\n"+m+"}":"{"+n.join(",")+"}";f=m;return d}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,h={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,d){var e;g=f="";if("number"===typeof d)for(e=0;e<d;e+=1)g+=" ";else"string"===typeof d&&(g=d);if((k=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",
{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&"object"===typeof g)for(e in g)Object.hasOwnProperty.call(g,e)&&(f=c(g,e),void 0!==f?g[e]=f:delete g[e]);return b.call(a,d,g)}d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return a=eval("("+a+")"),"function"===typeof b?c({"":a},""):a;throw new SyntaxError("JSON.parse");})})();function StringBuffer(){this.buffer=[]}StringBuffer.prototype.append=function(a){this.buffer.push(a);return this};StringBuffer.prototype.appendln=function(a){this.buffer.push(a+"\n");return this};StringBuffer.prototype.toString=function(){return this.buffer.join("")};
Math.sha1Hash=function(a){for(var b=[1518500249,1859775393,2400959708,3395469782],a=a+String.fromCharCode(128),c=Math.ceil((a.length/4+2)/16),d=Array(c),e=0;e<c;e++){d[e]=Array(16);for(var f=0;16>f;f++)d[e][f]=a.charCodeAt(64*e+4*f)<<24|a.charCodeAt(64*e+4*f+1)<<16|a.charCodeAt(64*e+4*f+2)<<8|a.charCodeAt(64*e+4*f+3)}d[c-1][14]=8*(a.length-1)/Math.pow(2,32);d[c-1][14]=Math.floor(d[c-1][14]);d[c-1][15]=8*(a.length-1)&4294967295;for(var a=1732584193,f=4023233417,g=2562383102,h=271733878,k=3285377520,
l=Array(80),o,s,r,m,n,e=0;e<c;e++){for(var i=0;16>i;i++)l[i]=d[e][i];for(i=16;80>i;i++)l[i]=Math.ROTL(l[i-3]^l[i-8]^l[i-14]^l[i-16],1);o=a;s=f;r=g;m=h;n=k;for(i=0;80>i;i++){var p=Math.floor(i/20),p=Math.ROTL(o,5)+Math.f(p,s,r,m)+n+b[p]+l[i]&4294967295;n=m;m=r;r=Math.ROTL(s,30);s=o;o=p}a=a+o&4294967295;f=f+s&4294967295;g=g+r&4294967295;h=h+m&4294967295;k=k+n&4294967295}return a.toHexStr()+f.toHexStr()+g.toHexStr()+h.toHexStr()+k.toHexStr()};
Math.f=function(a,b,c,d){switch(a){case 0:return b&c^~b&d;case 1:return b^c^d;case 2:return b&c^b&d^c&d;case 3:return b^c^d}};Math.ROTL=function(a,b){return a<<b|a>>>32-b};Number.prototype.toHexStr=function(){for(var a="",b,c=7;0<=c;c--)b=this>>>4*c&15,a+=b.toString(16);return a};
userUI=new function(){this.clientMessages={info:[],warning:[],error:[]};this.getUser=function(){return wc_getFullUser()};this.getUserInfo=function(){return wc_getUserInfo()};this.getServerMessages=function(){return wc_getMessages()};this.getClientMessages=function(){return this.clientMessages};this.addWarningMessage=function(a){this.clientMessages.warning.push(a)};this.addErrorMessage=function(a){this.clientMessages.error.push(a)};this.addInfoMessage=function(a){this.clientMessages.info.push(a)};
this.clearAllClientMessages=function(){this.clientMessages={info:[],warning:[],error:[]}};this.getData=function(){return wc_getOwnedDataList()};this.getJobData=function(a){var b=wc_getOwnedDataList(),c=[];if(null==b)return c;for(var d=0;d<b.length;d++)b[d].jobId==a&&c.push(b[d]);return c}};this.JSON||(this.JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=h[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var e,h,m,n,i=f,p,q=d[a];q&&"object"===typeof q&&"function"===typeof q.toJSON&&(q=q.toJSON(a));"function"===typeof k&&(q=k.call(d,a,q));switch(typeof q){case "string":return b(q);case "number":return isFinite(q)?""+q:"null";case "boolean":case "null":return""+
q;case "object":if(!q)return"null";f+=g;p=[];if("[object Array]"===Object.prototype.toString.apply(q)){n=q.length;for(e=0;e<n;e+=1)p[e]=c(e,q)||"null";m=0===p.length?"[]":f?"[\n"+f+p.join(",\n"+f)+"\n"+i+"]":"["+p.join(",")+"]";f=i;return m}if(k&&"object"===typeof k){n=k.length;for(e=0;e<n;e+=1)h=k[e],"string"===typeof h&&(m=c(h,q))&&p.push(b(h)+(f?": ":":")+m)}else for(h in q)Object.hasOwnProperty.call(q,h)&&(m=c(h,q))&&p.push(b(h)+(f?": ":":")+m);m=0===p.length?"{}":f?"{\n"+f+p.join(",\n"+f)+"\n"+
i+"}":"{"+p.join(",")+"}";f=i;return m}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,h={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,d){var e;g=f="";if("number"===typeof d)for(e=0;e<d;e+=1)g+=" ";else"string"===typeof d&&(g=d);if((k=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",
{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&"object"===typeof g)for(e in g)Object.hasOwnProperty.call(g,e)&&(f=c(g,e),void 0!==f?g[e]=f:delete g[e]);return b.call(a,d,g)}var e;d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");})})();NUMBER_OF_FEEDS=0;
function initFeedUrls(){PUBMED_RSS={babelomics:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=18A2e0_HeVtQ9k4iNuwfZFSuh5Ck38BCLWW3Wrlll4hWvJ8AtH",gepas:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1JKSd2KF3MGnV8mU6zDJ5PPH9-xMKOjyzBOmIeDyef9oPjR19C",fatigo:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=14GVrEVieJsBLt8q3l7R_YRQF8Tljz7pDcLCPmsBXT7C3vcMrI",fatiscan:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=18ervbTh5AP3vfhgpfpT8nuS-nlu-HGIjZU1IFPR3fJ15OKAOb",
gesbap:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1Rkszs2HVZ2QHM3VV-sfTuWBxZ3syAewBayCSYb3ariok2b1DW",genecodis:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1h7Su3P88Y-s0IJD2PR7EPdYjWx0n1H8LGb-Zm150P3-TFVERh",blast2go:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1HC7gWvsJppOwqCZp0h91Mvqp-QMP15A6Y7Qg2jKNZy3Ap4gfa",snow:"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1FU_ZGTY7E6tYYsWpRpUfCUmW163CN4E08cHCccdpHbJvTmgv7"};BIOINFO_RSS=
{babelomics:"http://bioinfo.cipf.es/taxonomy/term/53/feed/xml",gepas:"http://bioinfo.cipf.es/taxonomy/term/52/feed/xml",fatiscan:"http://bioinfo.cipf.es/taxonomy/term/65/feed/xml",snow:"http://bioinfo.cipf.es/taxonomy/term/50/feed/xml"}}
function loadFeedByTags(a,b){var c=new StringBuffer;c.append("<div id ='referencesContainer' class='feed-content'>");c.append("\t<table style='width:100%; height:100%'>");c.append("\t\t<tr valign='middle'>");c.append("\t\t\t<td align='center'>loading references...<img src='resources/images/icons/Waiting.gif' alt='' /></td>");c.append("\t\t</tr>");c.append("\t</table>");c.append("</div> ");$("#"+b+"_references").append(c.toString());c=fromTags2Urls(a);FEED_OBJECT=[];loadUrlFeeds(c,0,"referencesContainer")}
function fromTags2Urls(a){var b,c=[];if(0<a.length)for(var d=0;d<a.length;d++)b=a[d],PUBMED_RSS||initFeedUrls(),PUBMED_RSS[b]&&(c=c.concat(PUBMED_RSS[b]));return c}function loadUrlFeeds(a,b,c){$.jGFeed(a[b],function(d){null!=d&&(FEED_OBJECT=FEED_OBJECT.concat(d));b++;b<a.length?loadUrlFeeds(a,b,c):renderFeeds(c)})}
function renderFeeds(a){var b=new StringBuffer,c=[],d=[];if(null!=FEED_OBJECT&&0<FEED_OBJECT.length){for(var e=0;e<FEED_OBJECT.length;e++)for(var f=FEED_OBJECT[e],g=0;g<f.entries.length;g++){var h=f.entries[g];d[h.title]||(d[h.title]=!0,c=c.concat(f.entries[g]))}b.appendln("<div>&nbsp;</div>");b.appendln("<div>&nbsp;</div>");b.appendln("<div>&nbsp;</div>");b.append("<span class='references-title'>References</span>");b.append("<ul>");for(g=0;g<c.length;g++){h=c[g];b.append("<li>");b.append("<span>"+
h.author+". </span>");b.append("<span class='feed-content'><a href='"+h.link+"'  target='_blank'> "+h.title+"</a></span>");b.append("<span>"+h.categories+"</span>");d=h.content.split("<a");for(e=0;e<d.length;e++)f=d[e].lastIndexOf("</a>"),d[e]=d[e].substring(0,f);b.append("<div class='feed-link'><a class='text-show feed-link'>...see PubMed links</a>");b.append("\t<span class='text-hide feed-content'>");for(e=0;e<d.length;e++)null!=d[e]&&""!=d[e]&&(b.append("<a target='_blank'"),b.append(d[e]),b.append("</a>"));
b.append("\t</spam>");b.append("</div>");b.append("</li>");b.appendln("<div>&nbsp;</div>")}b.append("</ul>")}else b.append("<div class='feed-content'>no feeds found</div");$("#"+a).html(b.toString());initReadMore()}
Math.sha1Hash=function(a){for(var b=[1518500249,1859775393,2400959708,3395469782],a=a+String.fromCharCode(128),c=Math.ceil((a.length/4+2)/16),d=Array(c),e=0;e<c;e++){d[e]=Array(16);for(var f=0;16>f;f++)d[e][f]=a.charCodeAt(64*e+4*f)<<24|a.charCodeAt(64*e+4*f+1)<<16|a.charCodeAt(64*e+4*f+2)<<8|a.charCodeAt(64*e+4*f+3)}d[c-1][14]=8*(a.length-1)/Math.pow(2,32);d[c-1][14]=Math.floor(d[c-1][14]);d[c-1][15]=8*(a.length-1)&4294967295;for(var a=1732584193,f=4023233417,g=2562383102,h=271733878,k=3285377520,
l=Array(80),o,s,r,m,n,e=0;e<c;e++){for(var i=0;16>i;i++)l[i]=d[e][i];for(i=16;80>i;i++)l[i]=Math.ROTL(l[i-3]^l[i-8]^l[i-14]^l[i-16],1);o=a;s=f;r=g;m=h;n=k;for(i=0;80>i;i++){var p=Math.floor(i/20),p=Math.ROTL(o,5)+Math.f(p,s,r,m)+n+b[p]+l[i]&4294967295;n=m;m=r;r=Math.ROTL(s,30);s=o;o=p}a=a+o&4294967295;f=f+s&4294967295;g=g+r&4294967295;h=h+m&4294967295;k=k+n&4294967295}return a.toHexStr()+f.toHexStr()+g.toHexStr()+h.toHexStr()+k.toHexStr()};
Math.f=function(a,b,c,d){switch(a){case 0:return b&c^~b&d;case 1:return b^c^d;case 2:return b&c^b&d^c&d;case 3:return b^c^d}};Math.ROTL=function(a,b){return a<<b|a>>>32-b};Number.prototype.toHexStr=function(){for(var a="",b,c=7;0<=c;c--)b=this>>>4*c&15,a+=b.toString(16);return a};
function SVGComponent(a,b,c){this.labelNodeGroup=this.mainNodeGroup=this.SVGComponentNodeGroup=null;this.targetID=b.id;this.bottom=30;this.top=0;this.left=100;this.right=900;this.width=1100;this.svgHeight=this.height=50;this.backgroundColor="#FFFFFF";this.titleColor="#000000";this.title=this.overflow=!1;this.titleName=null;this.titleFontSize=10;null!=c&&(null!=c.bottom&&(this.bottom=c.bottom),null!=c.top&&(this.top=c.top),null!=c.left&&(this.left=c.left),null!=c.right&&(this.right=c.right),null!=
c.width&&(this.width=c.width),null!=c.height&&(this.svgHeight=this.height=c.height),null!=c.svgHeight&&(this.svgHeight=c.svgHeight),null!=c.backgroundColor&&(this.backgroundColor=c.backgroundColor),null!=c.titleFontSize&&(this.titleFontSize=c.titleFontSize),null!=c.titleColor&&(this.titleColor=c.titleColor),null!=c.title&&(this.title=!0,this.titleName=c.title),null!=c.overflow&&(this.overflow=c.overflow));this.id=SVGComponenterID;this.idSVGComponent=this.id+"_Features";this.namesID=this.id+"_Names";
this.idMain=this.id+"_Main";this.click=new Event(this)}SVGComponent.prototype.createSVGDom=function(a,b,c,d,e){a=document.getElementById(a);this.overflow&&a.setAttribute("overflow-y","auto");this._svg=SVG.createSVGCanvas(a,[["id",b],["height",this.svgHeight],["width",this.right]]);SVG.drawRectangle(this.left,0,this.right-this.left,this.svgHeight,this._svg,[["fill",e],[b,b+"_background"]]);return this._svg};SVGComponent.prototype.mouseClick=function(){};SVGComponent.prototype.mouseMove=function(){};
SVGComponent.prototype.mouseDown=function(){};SVGComponent.prototype.mouseUp=function(){};
SVGComponent.prototype.init=function(){this._svg=this.createSVGDom(this.targetID,this.id,this.width,this.height,this.backgroundColor);this.mainNodeGroup=SVG.drawGroup(this._svg,[["id",this.idMain]]);this.SVGComponentNodeGroup=SVG.drawGroup(this.mainNodeGroup,[["id",this.idSVGComponent]]);this.labelNodeGroup=SVG.drawGroup(this.mainNodeGroup,[["id",this.idLabels]]);var a=this;this._svg.addEventListener("click",function(b){a.mouseClick(b)},!1);this._svg.addEventListener("mousemove",function(b){a.mouseMove(b,
a)},!1);this._svg.addEventListener("mousedown",function(b){a.mouseDown(b,a)},!1);this._svg.addEventListener("mouseup",function(b){a.mouseUp(b,a)},!1)};
function GraphController(a,b,c,d,e){this._model=a;this.id=e;this.targetId=b;this.interactomeId="";this._layouts=[];this._layoutIndex=0;this._showNodeLabels=!0;this.height=d;this.width=c;this.nodeScale=this.graphScale=1;this.edgeIdClicked=this.nodeIdClicked=null;this.actionClick=0;this.canvasClicked=!1;this.layoutCoordenates=[];this.init();this.svg=this.drawStaticHTML();this._view=new GraphView(this,this.svg,c,d,e);this._showNodeLabels=!0;var f=this;this._view.nodeMoving.addEventListener(function(a,
b){f.nodeMoving(b)});this._view.nodeClick.addEventListener(function(a,b){f.nodeClicked(b)});this._view.edgeClick.addEventListener(function(a,b){f.edgeClicked(b)});this._view.canvasClick.addEventListener(function(){f.clickOnCanvas()});this._view.canvasMovingEvent.addEventListener(function(a,b){f.canvasMoving(b)});this.nodeClick=new Event;this.edgeClick=new Event;this.canvasClick=new Event}
GraphController.prototype={getSelectedNodeId:function(){return this._view.selectedNode},getSelectedEdgeId:function(){return this._view.selectedEdge},deserializer:function(a){this._coordenates=a.Graph.coordenates;this._shape=a.Graph.shape;this._color=a.Graph.color;this._size=a.Graph.size;this._opacity=a.Graph.opacity;this._id_title=a.Graph.id_title;this._nodeStrokeWidth=a.Graph.nodeStrokeWidth;this._colorOfEdges=a.Graph.colorOfEdges;this._deletedEdges=this._deserializerBooleans(a.Graph.deletedEdges);
this._deletedNodes=this._deserializerBooleans(a.Graph.deletedNodes);this._visible=this._deserializerBooleans(a.Graph.visible);this._visibleEdges=this._deserializerBooleans(a.Graph.visibleEdges)},_deserializerBooleans:function(a){var b=[];for(key in a)"true"==a[key]&&(b[key]=!0),"false"==a[key]&&(b[key]=!1);return b},serializer:function(){var a=new StringBuffer;a.append("{");a.append('"Graph" : { "nodes" : [');for(var b=0;b<this._model._nodes.length;b++){var c=this._model._nodes[b],d=this._model._nodes[b].id.replace(this.interactomeId,
"");a.append("{");a.append('"id":"'+d+'",');a.append('"edgesIndexes":[');for(d=0;d<c.edgesIndexes.length;d++)a.append('"'+c.edgesIndexes[d]+'"'),d!=c.edgesIndexes.length-1&&a.append(",");a.append("]}");b!=this._model._nodes.length-1&&a.append(",")}a.append('],"edges":[');for(b=0;b<this._model._edges.length;b++)c=this._model._edges[b],d=this._model._edges[b].id.replace(this.interactomeId,""),a.append("{"),a.append('"id":"'+d+'",'),a.append('"source":"'+c.source.replace(this.interactomeId,"")+'",'),
a.append('"target":"'+c.target.replace(this.interactomeId,"")+'",'),a.append('"type":"'+c.type+'"}'),b!=this._model._edges.length-1&&a.append(",");a.append("],");a.append(this._serializeCoordenatesToJSON("coordenates",this._coordenates,!0));a.append(this._serializeHashMaptoJSON("shape",this._shape,!0));a.append(this._serializeHashMaptoJSON("color",this._color,!0));a.append(this._serializeHashMaptoJSON("size",this._size,!0));a.append(this._serializeHashMaptoJSON("opacity",this._opacity,!0));a.append(this._serializeHashMaptoJSON("visible",
this._visible,!0));a.append(this._serializeHashMaptoJSON("id_title",this._id_title,!0));a.append(this._serializeHashMaptoJSON("nodeStrokeWidth",this._nodeStrokeWidth,!0));a.append(this._serializeHashMaptoJSON("colorOfEdges",this._colorOfEdges,!0));a.append(this._serializeHashMaptoJSON("deletedEdges",this._deletedEdges,!0));a.append(this._serializeHashMaptoJSON("deletedNodes",this._deletedNodes,!0));a.append(this._serializeHashMaptoJSON("visibleEdges",this._visibleEdges,!0));a.append(this._serializeHashMaptoJSON("nodeStrokeWidth",
this._nodeStrokeWidth,!1));a.append("}");a.append("}");return a.toString()},_serializeCoordenatesToJSON:function(a,b,c){var d=new StringBuffer;d.append('"'+a+'" : {');var a=[],e;for(e in b)a.push('"'+e+'" : ['+b[e][0]+","+b[e][1]+"]");for(b=0;b<a.length-1;b++)d.append(a[b]+",");d.append(a[a.length-1]);c?d.append("},"):d.append("}");return d},_serializeHashMaptoJSON:function(a,b,c){var d=new StringBuffer;d.append('"'+a+'" : {');var a=[],e;for(e in b)a.push('"'+e+'" : "'+b[e]+'"');for(b=0;b<a.length-
1;b++)d.append(a[b]+",");d.append(a[a.length-1]);c?d.append("},"):d.append("}");return d},init:function(){this.setLayouts(this._model.layouts[0]);this._coordenates=Array(this._model.getNodes().length);this._shape=Array(this._model.getNodes().length);this._size=Array(this._model.getNodes().length);this._color=Array(this._model.getNodes().length);this._opacity=Array(this._model.getNodes().length);this._visible=Array(this._model.getNodes().length);this._nodeStrokeWidth=Array(this._model.getNodes().length);
this._id_title=Array(this._model.getNodes().length);this._deletedNodes=Array(this._model.getNodes().length);this._deletedEdges=Array(this._model.getEdges().length);this._colorOfEdges=Array(this._model.getEdges().length);this.setDefaultVisibility();this.setDefaultSize();this.setDefaultShape();this.setDefaultColorNode();this.setDefaultOpacity();this.setDefaultNodeStrokeWidth();this.setDefaultIdTitle();this.setDefaultDeletedNodes();this.setDefaultDeletedEdges();this.setDefaultColorEdges();this._visibleEdges=
Array(this._model.getEdges().length);this.setDefaultEdgeVisibility();for(var a=0;a<this._model._nodes.length;a++)this.setCoordenates(this._model._nodes[a].id,this._model._nodes[a].cx[0]*(this.width-100)+50,this._model._nodes[a].cy[0]*(this.height-100)+50)},drawStaticHTML:function(){document.getElementById(this.targetId).innerHTML="";this.svg=SVG.createSVGCanvas(document.getElementById(this.targetId),[["id",this.id],["viewBox","0 0 "+this.width+" "+this.height],["style","top:0px; left:0px; width:"+
this.width+"px; height:"+this.height+"px; cursor:all-scroll;background-repeat:no-repeat"]]);SVG.drawRectangle(0,0,this.width,this.height,this.svg,[["fill","white"],["id","background"],["opacity","0"]]);SVG.drawGroup(this.svg,[["id","labels"]]);SVG.drawGroup(this.svg,[["id","edges"]]);SVG.drawGroup(this.svg,[["id","canvas"]]);return this.svg},hideNodeLabels:function(){this._showNodeLabels=!1;this._view.nodeLabelShow=!1;this._view.clearLabels()},changeLayout:function(a){this._layoutIndex=a;for(var b=
0;b<this._model.getNodes().length;b++){var c=parseFloat(this.layoutCoordenates[a][b][0])*(this.width-100)+50,d=parseFloat(this.layoutCoordenates[a][b][1])*(this.height-100)+50;this.setCoordenates(this._model.getNodes()[b].getId(),Math.ceil(c),Math.ceil(d))}this.draw()},setLayouts:function(a){this._layouts=a;this.layoutCoordenates=Array(this._layouts.length);for(a=0;a<this._layouts.length;a++)this.layoutCoordenates[a]=this._model.layoutCoordenates},setBackgroundColor:function(a){this._view.getBackground().setAttribute("fill",
a)},getBackgroundColor:function(){return this._view.getBackground().getAttribute("fill")},nodeClicked:function(){this.nodeClick.notify()},edgeClicked:function(){this.edgeClick.notify()},clickOnCanvas:function(){this.canvasClick.notify()},draw:function(){this._view.clearAll();this.drawNodes();this.drawEdges();this._showNodeLabels&&this._view.showNodeLabels(this)},showNodeLabels:function(){this._showNodeLabels=!0;this._view.showNodeLabels(this)},setDefaultOpacity:function(){for(var a=0;a<this._model.getNodes().length;a++)this._opacity[this._model.getNodes()[a].id]=
this._model.getNodes()[a].opacity},setDefaultSize:function(){for(var a=0;a<this._model.getNodes().length;a++)this._size[this._model.getNodes()[a].id]=this._model.getNodes()[a].size},setDefaultVisibility:function(){for(var a=0;a<this._model.getNodes().length;a++)this._visible[this._model.getNodes()[a].id]=!0},setDefaultShape:function(){for(var a=0;a<this._model.getNodes().length;a++)this._shape[this._model.getNodes()[a].id]=this._model.getNodes()[a].shape},setDefaultColorNode:function(){for(var a=
0;a<this._model.getNodes().length;a++)this._color[this._model.getNodes()[a].id]=this._model.getNodes()[a].color},setDefaultNodeStrokeWidth:function(){for(var a=0;a<this._model.getNodes().length;a++)this._nodeStrokeWidth[this._model.getNodes()[a].id]=this._model.getNodes()[a].nodeStrokeWidth},setDefaultIdTitle:function(){for(var a=0;a<this._model.getNodes().length;a++)this._id_title[this._model.getNodes()[a].id]=this._model.getNodes()[a].title},setDefaultEdgeVisibility:function(){for(var a=0;a<this._model.getEdges().length;a++)this._visibleEdges[this._model.getEdges()[a].id]=
!0},setDefaultDeletedNodes:function(){for(var a=0;a<this._model.getNodes().length;a++)this._deletedNodes[this._model.getNodes()[a].id]=!1},setDefaultDeletedEdges:function(){for(var a=0;a<this._model.getEdges().length;a++)this._deletedEdges[this._model.getEdges()[a].id]=!1},setDefaultColorEdges:function(){for(var a=0;a<this._model.getEdges().length;a++)this._colorOfEdges[this._model.getEdges()[a].id]="black"},nodeMoving:function(a){var b=this.getNode(a),c=this._view.getCoordenates(a);this._view.getNodeView(a)._coordenates=
c;this._view.getNodeView(a).cx=c[0];this._view.getNodeView(a).cy=c[1];this._view.getNodeView(a).clearLabel();this.updateCoordenates(a,c);this._showNodeLabels&&this._view.getNodeView(a).renderLabel();"undefined"==b||null==b||(this._view.clearEdges(),this.drawEdges())},canvasMoving:function(a){var b=a[1];this.translateX(a[0]);this.translateY(b)},updateCoordenates:function(a,b){this._model.getNodeIndex(a);this._coordenates[a]=[parseFloat(b[0]),parseFloat(b[1])]},zoomIn:function(){for(var a in interactomeViewerViz.controller._coordenates)this._coordenates[a]=
[2*this._coordenates[a][0],2*this._coordenates[a][1]];this.draw()},zoomOut:function(){for(var a in interactomeViewerViz.controller._coordenates)this._coordenates[a]=[this._coordenates[a][0]/2,this._coordenates[a][1]/2];this.draw()},setSVG:function(a){this._view.setSVG(a)},setCoordenates:function(a,b,c){this._coordenates[a]=[b,c]},scale:function(a){this.graphScale=a;for(var b=0;b<this._coordenates.length;b++)this._coordenates[b][0]*=a,this._coordenates[b][1]*=a;for(b=0;b<this._model.getNodes().length;b++)this._size[b]*=
a;this._view.radio*=a;this.draw()},translateX:function(a){for(var b=this._model.getNodes(),c=0;c<b.length;c++)this._coordenates[b[c].id][0]=parseFloat(this._coordenates[b[c].id][0])+parseFloat(a);this.draw()},translateY:function(a){for(var b=this._model.getNodes(),c=0;c<b.length;c++)this._coordenates[b[c].id][1]=parseFloat(this._coordenates[b[c].id][1])+parseFloat(a);this.draw()},drawNodes:function(){this._view.drawNodes(this._model.getNodes(),this._coordenates,this)},renderEdge:function(a){var b=
this.getEdge(a);if(null!=b){var c=this.getNodeCoordenates(b.source),d=this.getNodeCoordenates(b.target);null!=c&&null!=d&&(a=this._colorOfEdges[a],this._view.renderEdge(b,this.getNode(b.source),c,this.getNode(b.target),d,a,this))}},drawEdges:function(){for(var a=0;a<this._model.getEdges().length;a++)this.renderEdge(this._model.getEdges()[a].id)},getEdge:function(a){return this._model.getEdge(a)},getNode:function(a){return this._model.getNode(a)},getNodeIndex:function(a){return this._model.getNodeIndex(a)},
getNodeSize:function(a){return this._size[a]},getNodeShape:function(a){return this._shape[a]},getNodeColor:function(a){return this._color[a]},getOpacity:function(a){return this._opacity[a]},getNodeCoordenates:function(a){return this._coordenates[a]},getNodeStrokeWidth:function(a){return this._nodeStrokeWidth[a]},getTitle:function(a){return this._id_title[a]},random:function(){for(var a=0;a<this._model.getNodes().length;a++)this._coordenates[a]=[Math.floor(Math.random()*this.height),Math.floor(Math.random()*
this.width)];this.draw()},getModel:function(){return this._model},addNode:function(a,b,c,d,e,f,g,h,k,l){var o=[],s=[];o.push(c);s.push(d);var r=[];r.push(c);r.push(d);c=new PlotNode(a,b,o,s,[],{color:e,size:h,opacity:g,shape:k,nodeStrokeWidth:l});d=this._model.getNodes();this._model.getNodesId()[a]=d.length;d.push(c);this._coordenates[a]=r;this._color[a]=e;this._visible[a]=f;this._opacity[a]=g;this._size[a]=h;this._shape[a]=k;this._nodeStrokeWidth[a]=l;this._deletedNodes[a]=!1;this._id_title[a]=b;
this.draw();return c},addEdge:function(a,b,c){var b=this.getNode(b),c=this.getNode(c),d=this.getModel().getEdges(),e=this.getModel().getEdgesId(),f=new PlotEdge(a,b.id,c.id,{visibility:!0}),g=this.getModel().getEdges().length;e[a]=g;d.push(f);this.getModel().setEdges(d);this.getModel().setEdgesId(e);this._visibleEdges[a]=!0;this._deletedEdges[a]=!1;this._colorOfEdges[a]="black";b.edgesIndexes.push(a);c.edgesIndexes.push(a);this.draw()}};
function randomLayout(){this.sifFieldsString=[];this.nodes=[];this.edges=[];this.nodesId={};this.edgesId={};this.loadSIF=function(a){for(var a=a.split("\n"),b=0;b<a.length;b++)if(0<a[b].length){var c=a[b].replace(/^\s*|\s*$/g,"").replace(/\s/g,"**%**").split("**%**");0<c.length&&this.sifFieldsString.push(c)}this.init()};this.addEdge=function(a,b){this.nodes[a].edgesIndexes.push(b)};this._calculateCoordenates=function(a,b){var c=[],d=[];c.push(Math.random());d.push(Math.random());return new PlotNode(b,
b,c,d,[])};this.init=function(){for(var a=0;a<this.sifFieldsString.length;a++){var b=this.sifFieldsString[a][0];this.nodes.push(this._calculateCoordenates(a,b));this.nodesId[b]=a}for(a=0;a<this.sifFieldsString.length;a++)for(b=2;b<this.sifFieldsString[a].length;b++){var c=this.sifFieldsString[a][0],d=this.sifFieldsString[a][b],e="edge_"+c+"_"+d;this.addEdge(a,e);this.edges.push(new PlotEdge(e,c,d));this.edgesId[e]=this.edges.length-1}};this.toObject=function(){return new PlotGraph(this.nodes,this.nodesId,
this.edges,this.edgesId,["random"])}}
function twoLayout(){randomLayout.prototype.constructor.call(this);this.classesType=[];this.classes={};this.classesIndex={};this._calculateCoordenates=function(a,b){if(2==this.classesType.length){var c=[],d=[];c.push(Math.random());this.classes[b]==this.classesType[0]?d.push(0.2):d.push(0.8)}return new PlotNode(b,b,c,d,[])};this.loadSIF=function(a){for(var a=a.split("\n"),b=0;b<a.length;b++)if(0<a[b].length){var c=a[b].replace(/^\s*|\s*$/g,"").replace(/\s/g,"**%**").split("**%**");if(0<c.length){var d=
c[c.length-1];this.addClass(d);this.classes[c[0]]=d;this.classesIndex[d].push(c[0]);this.sifFieldsString.push(c.slice(0,c.length-2))}}this.init()};this.addClass=function(a){for(var b=0;b<this.classesType.length;b++)if(this.classesType[b]==a)return;this.classesType.push(a);this.classesIndex[a]=[]}}twoLayout.prototype=new randomLayout;twoLayout.prototype.constructor=randomLayout;twoLayout.prototype.parent=randomLayout.prototype;
function RankedTwoLayout(){twoLayout.prototype.constructor.call(this);this.nodeLevel={};this.maxLevelPerClass={};this.nodeLevelSorter=[];this.nodesProcessedPerClasse={};this.addClass=function(a){for(var b=0;b<this.classesType.length;b++)if(this.classesType[b]==a)return;this.classesType.push(a);this.classesIndex[a]=[];this.maxLevelPerClass[a]=0;this.nodesProcessedPerClasse[a]=0};this._calculateCoordenates=function(a,b,c){if(2==this.classesType.length){var d=[],e=[];c||(a=this.classes[b],d.push(this.nodesProcessedPerClasse[a]*
(1/this.classesIndex[a].length)),this.nodesProcessedPerClasse[a]++,this.classes[b]==this.classesType[0]?e.push(0.1):e.push(0.9))}return new PlotNode(b,b,d,e,[])};this.loadSIF=function(a){for(var a=a.split("\n"),b=0;b<a.length;b++)if(0<a[b].length){var c=a[b].replace(/^\s*|\s*$/g,"").replace(/\s/g,"**%**").split("**%**");if(0<c.length){var d=c[c.length-1];this.addClass(d);this.classes[c[0]]=d;this.classesIndex[d].push(c[0]);this.sifFieldsString.push(c.slice(0,c.length-2))}}this.init()};this.init=function(){for(var a=
0;a<this.sifFieldsString.length;a++){var b=this.sifFieldsString[a][0],c=this._calculateCoordenates(a,b,!0);this.nodes.push(c);this.nodesId[b]=a;this.nodeLevel[b]=0}for(a=0;a<this.sifFieldsString.length;a++)for(b=2;b<this.sifFieldsString[a].length;b++){var c=this.sifFieldsString[a][0],d=this.sifFieldsString[a][b],e="edge_"+c+"_"+d;this.addEdge(a,e);this.edges.push(new PlotEdge(e,c,d));this.edgesId[e]=this.edges.length-1;if(this.classes[c]!=this.classes[d]){this.nodeLevel[c]++;this.nodeLevel[d]++;var e=
this.classes[c],f=this.classes[d];this.maxLevelPerClass[e]<this.nodeLevel[c]&&(this.maxLevelPerClass[e]=this.nodeLevel[c]);this.maxLevelPerClass[f]<this.nodeLevel[d]&&(this.maxLevelPerClass[f]=this.nodeLevel[d])}}for(a=0;a<this.sifFieldsString.length;a++)b=this.sifFieldsString[a][0],this.nodeLevelSorter.push([this.nodeLevel[b],b]);this.nodeLevelSorter.sort();this.nodes=[];for(a=0;a<this.nodeLevelSorter.length;a++)b=this.nodeLevelSorter[a][1],c=this._calculateCoordenates(a,b,!1),this.nodes.push(c),
this.nodesId[b]=a}}RankedTwoLayout.prototype=new twoLayout;RankedTwoLayout.prototype.constructor=twoLayout;RankedTwoLayout.prototype.parent=twoLayout.prototype;
function HivePlot(a){RankedTwoLayout.prototype.constructor.call(this);this.edgeType="line";this.classColor=null;console.log(a);null!=a&&(null!=a.edgeType&&(this.edgeType=a.edgeType),null!=a.classColor&&(this.classColor=a.classColor));this.addClass=function(a){for(var c=0;c<this.classesType.length;c++)if(this.classesType[c]==a)return;this.classesType.push(a);this.classesIndex[a]=[];this.maxLevelPerClass[a]=0;this.nodesProcessedPerClasse[a]=0};this._calculateCoordenates=function(a,c,d){var a=[],e=[],
f=this.classes[c];d||(this.nodesProcessedPerClasse[f]++,this.classes[c]==this.classesType[0]&&(a.push(0.5),d=0.6/this.classesIndex[f].length*(this.classesIndex[f].length-this.nodesProcessedPerClasse[f]),e.push(d)),this.classes[c]==this.classesType[1]&&(a.push(0.5+0.5/this.classesIndex[f].length*this.nodesProcessedPerClasse[f]),d=0.6+0.4/this.classesIndex[f].length*this.nodesProcessedPerClasse[f],e.push(d)),this.classes[c]==this.classesType[2]&&(a.push(0.5-0.5/this.classesIndex[f].length*this.nodesProcessedPerClasse[f]),
d=0.6+0.4/this.classesIndex[f].length*this.nodesProcessedPerClasse[f],e.push(d)));return new PlotNode(c,c,a,e,[],{color:this.classColor[f]})};this.getEdgeLocation=function(a,c){if(a==this.classesType[0]){if(c==this.classesType[1])return"AreaB";if(c==this.classesType[2])return"AreaA"}if(a==this.classesType[1]){if(c==this.classesType[0])return"AreaB";if(c==this.classesType[2])return"AreaC"}if(a==this.classesType[2]){if(c==this.classesType[0])return"AreaA";if(c==this.classesType[1])return"AreaC"}};this.init=
function(){for(var a=0;a<this.sifFieldsString.length;a++){var c=this.sifFieldsString[a][0],d=this._calculateCoordenates(a,c,!0);this.nodes.push(d);this.nodesId[c]=a;this.nodeLevel[c]=0}for(a=0;a<this.sifFieldsString.length;a++)for(c=2;c<this.sifFieldsString[a].length;c++){var d=this.sifFieldsString[a][0],e=this.sifFieldsString[a][c],f="edge_"+d+"_"+e;this.addEdge(a,f);var g=this.classes[d],h=this.classes[e];this.edges.push(new PlotEdge(f,d,e,{type:this.edgeType,area:this.getEdgeLocation(g,h),classesNumber:3,
opacity:0.5}));this.edgesId[f]=this.edges.length-1;this.classes[d]!=this.classes[e]?(this.nodeLevel[d]++,this.nodeLevel[e]++,this.maxLevelPerClass[g]<this.nodeLevel[d]&&(this.maxLevelPerClass[g]=this.nodeLevel[d]),this.maxLevelPerClass[h]<this.nodeLevel[e]&&(this.maxLevelPerClass[h]=this.nodeLevel[e])):this.edges.pop()}for(a=0;a<this.sifFieldsString.length;a++)c=this.sifFieldsString[a][0],this.nodeLevelSorter.push([this.nodeLevel[c],c]);this.nodeLevelSorter.reverse().sort();this.nodes=[];for(a=0;a<
this.nodeLevelSorter.length;a++)c=this.nodeLevelSorter[a][1],d=this._calculateCoordenates(a,c,!1),this.nodes.push(d),this.nodesId[c]=a}}HivePlot.prototype=new RankedTwoLayout;HivePlot.prototype.constructor=RankedTwoLayout;HivePlot.prototype.parent=RankedTwoLayout.prototype;
function PlotGraph(a,b,c,d,e){this._nodes=a;this._edges=c;this.nodesId=b;this.edgesId=d;this.layouts=e;this.getNodes=function(){return this._nodes};this.getNodesId=function(){return this.nodesId};this.setNodes=function(a){this._nodes=a};this.getNode=function(a){return this._nodes[this.nodesId[a]]};this.getNodeIndex=function(a){return this.nodesId[a]};this.getEdges=function(){return this._edges};this.getEdgesId=function(){return this.edgesId};this.getEdge=function(a){return this._edges[this.edgesId[a]]};
this.setEdges=function(a){this._edges=a};this.setEdgesId=function(a){this.edgesId=a};this.getEdgesFromNode=function(a){for(var b=[],c=0;c<this._nodes[this.nodesId[a]].edgesIndexes.length;c++)b.push(this.getEdge(this._nodes[this.nodesId[a]].edgesIndexes[c]));return b}}
function PlotEdge(a,b,c,d){this.id=a;this.source=b;this.target=c;this.type="line";this.classesNumber=this.area=null;this.color="black";this.opacity=1;null!=d&&(null!=d.type&&(this.type=d.type),null!=d.area&&(this.area=d.area),null!=d.area&&(this.classesNumber=d.classesNumber),null!=d.color&&(this.color=d.color),null!=d.opacity&&(this.opacity=d.opacity),null!=d.visibility&&(this.visibility=d.visibility));this.getSource=function(){return this.source};this.getTarget=function(){return this.target};this.getId=
function(){return this.id}}function PlotNode(a,b,c,d,e,f){this.id=a;this.title=b;this.cx=c;this.cy=d;this.edgesIndexes=e;this.color="black";this.size=3;this.opacity=1;this.shape="ci";null!=f&&(null!=f.color&&(this.color=f.color),null!=f.size&&(this.size=f.size),null!=f.opacity&&(this.opacity=f.opacity),null!=f.shape&&(this.shape=f.shape),null!=f.nodeStrokeWidth&&(this.nodeStrokeWidth=f.nodeStrokeWidth))}
function randomSIF(a,b){for(var c="",d="",e="",f=0;f<a;f++){var c=c+"node_"+f+" type_"+f+" ",d=d+"node_"+f+" type_"+f+" ",e=e+"node_"+f+" type_"+f+" ",g=Math.ceil(Math.random()*(a/100));if(0==f%10)for(var h=0;h<10*g;h++)var k="node_"+Math.ceil(Math.random()*(a-1))+" ",c=c+k,d=d+k,e=e+k;else for(h=0;h<g;h++)k="node_"+Math.ceil(Math.random()*(a-1))+" ",c+=k,d+=k,e+=k;0==f%2?(d+="class class1",e+="class class1"):(d=d+"class class"+Math.ceil(Math.random()*b),e=e+"class class"+Math.ceil(3*Math.random()));
d+="\n";e+="\n";c+="\n"}return[c,d,e]}
function GraphViewNode(a,b,c,d,e,f,g,h){this.node=b;this._graphView=a;this.cx=Math.ceil(c[0]);this.cy=Math.ceil(c[1]);this.r=d;this.color="black";null!=e&&(this.color=e);this.size=d;this.shape="ci";null!=f&&(this.shape=f);this.opacity=g;this.svgLabel=this.svgNode=null;this.noseStrokeWidth="1";null!=h&&(this.noseStrokeWidth=h);this.over=new Event(this);this.mouseout=new Event(this);this.mousedown=new Event(this);this.mouseup=new Event(this);this.click=new Event(this);this.dblclick=new Event(this);
this.moving=new Event(this);this.targetElement=this.GrabPoint=this.TrueCoords=null}
GraphViewNode.prototype={getRadio:function(){return this._graphView._controller.getNodeSize(this.node.getId())},render:function(a){this.svg=a;if("sq"==this.shape){var a=2*this.r,b=this.cx-this.r,c=this.cy-this.r,d=[["id",this.node.id],["class","NODE"],["fill",this.color],["z-index","10"],["opacity",this.opacity],["x",b],["y",c],["width",a],["height",a],["stroke","black"],["stroke-width",this.noseStrokeWidth]];this.svgNode=SVG.drawRectangle(b,c,a,a,this.getCanvas(),d)}"ci"==this.shape&&(d=[["id",this.node.id],
["class","NODE"],["fill",this.color],["z-index","10"],["opacity",this.opacity],["stroke","black"],["stroke-width",this.noseStrokeWidth]],this.svgNode=SVG.drawCircle(this.cx,this.cy,this.r,this.getCanvas(),d));this.attachEvents(document.getElementById(this.node.id))},renderLabel:function(){var a=this.cx-this.r,b=0;"ci"==this.shape&&(b=parseFloat(this.cy)+parseFloat(this.r)+10);"sq"==this.shape&&(b=parseFloat(this.cy)+parseFloat(this.r)+17);return this.svgLabel=SVG.drawText(a,b,this.node.title,this.getLabelCanvas(),
[["opacity",this.opacity],["id","label_"+this.node.id],["font-size","10"],["class","label"]])},clearLabel:function(){null!=this.svgLabel&&this._graphView.clearLabel("label_"+this.node.id)},init:function(){this.TrueCoords=this.svg.createSVGPoint();this.GrabPoint=this.svg.createSVGPoint()},getCanvas:function(){for(j=0;j<this.svg.childNodes.length;j++)if("canvas"==this.svg.childNodes[j].id)return this.svg.childNodes[j]},getLabelCanvas:function(){for(j=0;j<this.svg.childNodes.length;j++)if("labels"==
this.svg.childNodes[j].id)return this.svg.childNodes[j]},attachEvents:function(a){var b=this;a.onclick=function(a){b._graphView.selectedNodeEvent(a.target.id)};a.ondblclick=function(a){b._graphView.selectedNode=a.target.id;b._graphView._controller.nodeDblClicked(a.target.id)}}};
function GraphView(a,b,c,d){this._controller=a;this.svg=b;this.svgs=[];this.svgs.push(b);this.canvas=[];this.getCanvas();this.width=c;this.height=d;this.graphViewNodes={};var e=this;this.svgNodeLabel={};this.nodeIDMoving=null;this.nodeMoving=new Event;this.selectedEdge=this.selectedNode=null;this.canvasMoving=!1;this.canvasClicked=!0;this.translate=new Event;this.canvasMovingEvent=new Event;this.nodeClick=new Event;this.edgeClick=new Event;this.canvasClick=new Event;this.svg.addEventListener("mousemove",
function(a){e.mouseMove(a,e)},!1);this.svg.addEventListener("mousedown",function(a){e.mouseDown(a,e)},!1);this.svg.addEventListener("mouseup",function(a){e.mouseUp(a,e)},!1);this.attachEvents(document.getElementById(this.svg.id))}
GraphView.prototype={selectedNodeEvent:function(a){this.selectedNode=a;this.nodeClick.notify(a);this.canvasClicked=!1;this._controller.draw()},selectedEdgeEvent:function(a){this.selectedEdge=a;this.edgeClick.notify(a);this.canvasClicked=!1},canvasClickedEvent:function(){!0==this.canvasClicked&&(this._controller.draw(),this._controller.nodeIdClicked=null,this._controller.edgeIdClicked=null,this._controller.actionClick=0,this.canvasClick.notify())},attachEvents:function(a){var b=this;a.onclick=function(a){b.canvasClickedEvent(a.target.id)}},
getSelectedNode:function(){return this.selectedNode},getSelectedEdge:function(){return this.selectedEdge},showNodeLabels:function(a){this.renderNodeLabels(a)},clearNodeLabels:function(){this.clearLabels()},renderNodeLabels:function(){for(nodeid in this.graphViewNodes)for(var a=0;a<this.svgs.length;a++){var b=this.graphViewNodes[nodeid].renderLabel();this.svgNodeLabel[this.graphViewNodes[nodeid].node.id]=b}},mouseDown:function(a){this.canvasGrabPoint=this.svg.createSVGPoint();this.TrueCoords=this.GetTrueCoords(a,
this.svg);this.canvasGrabPoint.x=this.TrueCoords.x;this.canvasGrabPoint.y=this.TrueCoords.y;this.canvasMoving=!0;"NODE"==a.target.getAttribute("class")?(this.TrueCoords=this.GetTrueCoords(a,this.svg),this.GrabPoint=this.svg.createSVGPoint(),this.DragTarget=this.targetElement=a.target,this.DragTarget.parentNode.appendChild(this.DragTarget),a=this.DragTarget.getCTM(),this.GrabPoint.x=this.TrueCoords.x-Number(a.e),this.GrabPoint.y=this.TrueCoords.y-Number(a.f),this.canvasMoving=!1):"NODE"!=a.target.getAttribute("class")&&
"EDGE"!=a.target.getAttribute("class")&&(this.canvasClicked=!0)},mouseUp:function(){this.canvasMoving=!1;this.DragTarget&&(this.DragTarget.setAttributeNS(null,"pointer-events","all"),this.DragTarget=null)},mouseMove:function(a){this.TrueCoords=this.GetTrueCoords(a,this.svg);if(this.canvasMoving){var a=this.GetTrueCoords(a,this.svg),b=parseFloat(a.x)-parseFloat(this.canvasGrabPoint.x),c=parseFloat(a.y)-parseFloat(this.canvasGrabPoint.y);this.canvasGrabPoint.x=a.x;this.canvasGrabPoint.y=a.y;this.canvasMovingEvent.notify([b,
c])}else this.DragTarget&&(this.DragTarget.getAttribute("cx"),this.DragTarget.getAttribute("cy"),this.DragTarget.setAttribute("cx",this.TrueCoords.x),this.DragTarget.setAttribute("cy",this.TrueCoords.y),this.DragTarget.setAttribute("x",this.TrueCoords.x),this.DragTarget.setAttribute("y",this.TrueCoords.y),this.nodeIDMoving=this.DragTarget.id,this.nodeMoving.notify(this.DragTarget.id))},mouseclick:function(){},getBackground:function(){for(j=0;j<this.svg.childNodes.length;j++)if("background"==this.svg.childNodes[j].id)return this.svg.childNodes[j]},
getCanvas:function(){this.canvas=[];for(var a=0;a<this.svgs.length;a++)for(j=0;j<this.svgs[a].childNodes.length;j++)"canvas"==this.svgs[a].childNodes[j].id&&this.canvas.push(this.svgs[a].childNodes[j])},getCanvasEdge:function(){for(j=0;j<this.svg.childNodes.length;j++)if("edges"==this.svg.childNodes[j].id)return this.svg.childNodes[j]},getCanvasLabels:function(){for(j=0;j<this.svg.childNodes.length;j++)if("labels"==this.svg.childNodes[j].id)return this.svg.childNodes[j]},clearLabels:function(){for(var a=
this.getCanvasLabels();0<a.childNodes.length;)a.removeChild(a.childNodes[0])},clearEdges:function(){for(var a=this.getCanvasEdge();0<a.childNodes.length;)a.removeChild(a.childNodes[0])},drawNodes:function(a,b,c){this.graphViewNodes={};for(var d=0;d<a.length;d++){var e=a[d].id,f=c.getNodeSize(e),g=c.getNodeColor(e),h=c.getNodeShape(e),k=c.getOpacity(e),l=c.getTitle(e);a[d].title=l;l=c.getNodeStrokeWidth(e);!1==c._deletedNodes[e]&&(f=!0==c._visible[e]?new GraphViewNode(this,a[d],b[e],f,g,h,k,l):new GraphViewNode(this,
a[d],b[e],f,g,h,0,l),this.graphViewNodes[e]=f)}this.renderAllNodes()},clearAll:function(){for(var a=0;a<this.canvas.length;a++)for(;0<this.canvas[a].childNodes.length;)this.canvas[a].removeChild(this.canvas[a].childNodes[0]);this.clearEdges();this.clearLabels()},clearCanvasElement:function(a){for(var b=0;b<this.canvas.length;b++)for(j=0;j<this.canvas[b].childNodes.length;j++)this.canvas[b].childNodes[j].id==a&&this.canvas[b].removeChild(this.canvas[b].childNodes[j])},getElementByIdOnCanvas:function(a){for(j=
0;j<this.canvas[0].childNodes.length;j++)if(this.canvas[0].childNodes[j].id==a)return this.canvas[0].childNodes[j];return null},getNodeView:function(a){return this.graphViewNodes[a]},getCoordenates:function(a){var b=this.getElementByIdOnCanvas(a),a=b.getAttribute("cx"),b=b.getAttribute("cy");return[a,b]},clearEdge:function(a){for(var b=this.getCanvasEdge(),c=0;c<b.childNodes.length;c++)b.childNodes[c].id==a&&b.removeChild(b.childNodes[c])},clearLabel:function(a){for(var b=this.getCanvasLabels(),c=
0;c<b.childNodes.length;c++)b.childNodes[c].id==a&&b.removeChild(b.childNodes[c])},setSVG:function(a){this.svgs.push(a);this.getCanvas()},renderAllNodeOnNoMainCanvas:function(){for(var a=0;a<this.graphViewNodes.length;a++)for(var b=1;b<this.svgs.length;b++)this.graphViewNodes[a].render(this.svgs[b])},renderAllNodes:function(){for(id in this.graphViewNodes)this.graphViewNodes[id].render(this.svg)},renderEdge:function(a,b,c,d,e,f,g){b=new GraphViewNode(this,b,c,this.radio);d=new GraphViewNode(this,
d,e,this.radio);a=new EdgeViewNode(this,a,b,d,f);if(!1==g._deletedEdges[a.edge.id]&&!0==g._visibleEdges[a.edge.id])for(g=0;g<this.svgs.length;g++)a.render(this.svgs[g])},GetTrueCoords:function(a,b){var c=this.svg.createSVGPoint();c.x=this.getMouseCoords(a,b).x;c.y=this.getMouseCoords(a,b).y;return c},getMouseCoords:function(a,b){var c,d;muna=b;document.getBoxObjectFor?(d=document.getBoxObjectFor(b),c=a.pageX-d.x,d=a.pageY-d.y):b.getBoundingClientRect?(d=b.getBoundingClientRect(),c=a.clientX-Math.floor(d.left),
d=a.clientY-Math.floor(d.top)):(c=a.pageX-(b.offsetLeft||0),d=a.pageY-(b.offsetTop||0));return{x:c,y:d}}};function EdgeViewNode(a,b,c,d,e){this.edge=b;this.nodeViewSource=c;this.nodeViewTarget=d;this._graphView=a;this.strokeColor=e;this.click=new Event(this)}
EdgeViewNode.prototype={render:function(a){this.svg=a;var a=Math.ceil(this.nodeViewSource.cx),b=Math.ceil(this.nodeViewSource.cy),c=Math.ceil(this.nodeViewTarget.cx),d=Math.ceil(this.nodeViewTarget.cy);if(this.nodeViewSource.node.id==this.nodeViewTarget.node.id){var e=this.nodeViewSource.node.size,f=a-e/2,g=a+e/2,f="M"+f+","+(b-e/2)+" T"+((g-f)/2+f)+","+(b-2*e)+" "+g+","+(b-e/2),e=[["x1",a],["x2",c],["y1",b],["y2",d],["fill","none"],["stroke-width","2"],["id",this.edge.getId()],["stroke",this.strokeColor],
["opacity",0.5],["class","EDGE"]];SVG.drawPath(f,this.getCanvas(),e);this.attachEvents(document.getElementById(this.edge.id))}else"line"==this.edge.type&&(e=[["x1",a],["x2",c],["y1",b],["y2",d],["stroke-width","2"],["id",this.edge.getId()],["fill",this.strokeColor],["stroke",this.strokeColor],["opacity",0.5],["class","EDGE"]],drawLine(e,this.getCanvas()),this.attachEvents(document.getElementById(this.edge.id))),"bezier"==this.edge.type&&3==this.edge.classesNumber&&(e=[["id",this.edge.getId()],["stroke",
"black"],["fill","none"],["opacity",this.edge.opacity],["class","EDGE"]],f=0,Math.min(a,c),g=0,Math.min(b,d),"AreaA"==this.edge.area&&(f=Math.min(a,c),g=Math.min(b,d)),"AreaB"==this.edge.area&&(f=Math.max(a,c),g=Math.min(b,d)),"AreaC"==this.edge.area&&(f=(c-a)/2+a,g=Math.max(b,d)),SVG.drawPath("M"+a+","+b+" Q"+f+","+g+" "+c+","+d,this.getCanvas(),e),this.attachEvents(document.getElementById(this.edge.id)))},getCanvas:function(){for(j=0;j<this.svg.childNodes.length;j++)if("edges"==this.svg.childNodes[j].id)return this.svg.childNodes[j]},
attachEvents:function(a){var b=this;a.onclick=function(a){b._graphView.selectedEdgeEvent(a.target.id)}}};function ellipse(a){a.begin=0;for(var b=2*Math.PI/a.steps,c=[],d=0;d<a.steps;d++)c[d]=b*d+a.begin;b=[];for(d=0;d<a.steps;d++){var e=a.xRadius*Math.cos(c[d]),f=a.yRadius*Math.sin(c[d]),e={x:Math.round(parseInt(e)+parseInt(a.center.x)),y:Math.round(parseInt(f)+parseInt(a.center.y)),idx:d};b[d]=e}return b}
function calculateDistanceBetweenTwoPoints(a,b,c,d){a=Math.pow(c-a,2);b=Math.pow(d-b,2);return Math.sqrt(a+b)}function calculateAngleBetweenTwoPoints(a,b,c,d){return 180*Math.atan2(d-b,c-a)/Math.PI}function drawLine(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","line");setProperties(c,a);b.appendChild(c);return c}function drawRect(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","rect");setProperties(c,a);b.appendChild(c);return c}
function drawCircle(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","circle");setProperties(c,a);b.appendChild(c);return c}function setProperties(a,b){for(var c=0;c<b.length;c++)a.setAttribute(b[c][0],b[c][1])}
var DOM={createNewElement:function(a,b,c){for(var a=document.createElement(a),d=0;d<c.length;d++)a.setAttribute(c[d][0],c[d][1]);b.appendChild(a);return a},createTextNode:function(a,b){var c=document.createTextNode(a);b.appendChild(c);return c},removeChilds:function(a){for(a=document.getElementById(a);0<a.childNodes.length;)a.removeChild(a.childNodes[0])},select:function(a){return document.getElementById(a)}};
