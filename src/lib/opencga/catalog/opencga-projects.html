<dom-module id="opencga-projects">
    <template>
        <style is="custom-style" include="jso-styles"></style>
        <style>
            .center {
                margin: auto;
                text-align: justify;
                width: 60%;
            }
        </style>

        <div>
            <h2 hidden$="{{hideText}}" class="center">Projects</h2>
            <br>
            <table class="table table-bordered center">
                <thead>
                    <tr class="table-header" style="background-color: #eee">
                        <th>Project</th>
                        <th>Studies</th>
                    </tr>
                </thead>
                <tbody>
                    <template is="dom-repeat" items="{{projects}}">
                        <tr>
                            <td>
                                <a href="#" on-click="fireSelectProject" data-project="{{item}}">{{item.name}}</a>
                            </td>
                            <td>
                                <ul class="list-unstyled">
                                    <template is="dom-repeat" items="{{item.studies}}" as="study">
                                        <li>
                                            <a href="#" on-click="fireSelectStudy" data-project="{{item}}" data-study="{{study}}">{{study.name}}</a>
                                        </li>
                                    </template>
                                </ul>
                            </td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>
    </template>
    <script>
        Polymer({
            is: 'opencga-projects',
            properties: {
                projects: {
                    type: Array,
                    value: []
                },
                hideText: {
                    type: Boolean,
                    reflectToAttribute: true,
                    value: false
                }
            },
            fireSelectProject: function (e) {
                e.preventDefault();
                this.fire('project', {project: e.target.dataProject});
            },
            fireSelectStudy: function (e) {
                e.preventDefault();
//                this.fire('study', {studyName: e.target.innerHTML, studyId: e.target.dataId, project: e.target.dataProject});
                this.fire('study', {study: e.target.dataStudy, project: e.target.dataProject});
            }
        });
    </script>
</dom-module>