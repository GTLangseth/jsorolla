<!--
  ~ Copyright 2015 OpenCB
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<link rel="import" href="../catalog/samples/opencga-sample-filter.html">
<link rel="import" href="../opencga-active-filters.html">

<dom-module id="variant-analysis-selector">

    <template>
        <style is="custom-style" include="jso-styles"></style>
        <style is="custom-style" include="jso-styles"></style>
        <!-- This is where main application is rendered -->



        <div class="panel">
            <div class="col-md-3">
                    <!--<opencga-sample-filter opencga-client="{{opencgaClient}}"></opencga-sample-filter>-->

                <!--
                The following code has to be defined properly -> this is only for demo purposes
                -->

                <br>
                <div style="width: 60%;margin: 0 auto">
                    <button type="button" class="btn btn-primary" style="width: 100%" on-click="onSearch">
                        <i class="fa fa-search" aria-hidden="true" style="padding: 0px 5px 0px 5px"></i>
                        Search
                    </button>
                </div>
                <br>
                <br>

                <div class="panel-group" id="{{prefix}}Accordion" role="tablist" aria-multiselectable="true">

                    <!-- Sample Selection -->
                    <div class="panel panel-default">
                        <div class="panel-heading" role="tab" id="{{prefix}}SampleSelectionHeading">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#{{prefix}}Accordion"
                                   href="#{{prefix}}SampleSelection" aria-expanded="true" aria-controls="{{prefix}}SampleSelection">
                                    Analysis Selection
                                    <div style="float: right" class="tooltip-div">
                                        <a data-toggle="tooltip" title="Sample selection">
                                            <i class="fa fa-info-circle" aria-hidden="true"></i>
                                        </a>
                                    </div>
                                </a>
                            </h4>
                        </div>
                        <div id="{{prefix}}SampleSelection" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="{{prefix}}SampleSelectionHeading">
                            <div class="panel-body">
                                <div class="form-group">
                                    <form>
                                        <label>Select</label>
                                        <br>
                                        <input type="radio" name="selectionButtons" id="allRadio" value="all" class$="{{prefix}}FilterRadio" checked on-change="calculateFilters" style="padding-left: 20px"> All<br>
                                        <input type="radio" name="selectionButtons" id="recentlyRadio" value="recently" class$="{{prefix}}FilterRadio" on-change="calculateFilters" style="padding-left: 20px"> Recently Created<br>
                                        <input type="radio" name="selectionButtons" id="rangeRadio" value="range" class$="{{prefix}}FilterRadio" on-change="calculateFilters" style="padding-left: 20px"> Range
                                    </form>

                                    <div class="panel-body">
                                        <span>From</span>
                                        <div class="input-group date" id="{{prefix}}datetimePickerFrom">
                                            <input type="text" class="form-control"/>
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                            <span>To</span>
                                            <div class="input-group date" id="{{prefix}}datetimePickerTo">
                                                <input type="text" class="form-control"/>
                                                <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                        </div>
                                    </div>

                                    <label>Other filters</label>
                                    <div class="panel-body">
                                        <label>Analysis ID</label>
                                        <input type="text" id="{{prefix}}analysisID" class="form-control" placeholder="AN-23, AN-50 ..." on-keyup="calculateFilters">

                                        <label>Samples ID</label>
                                        <input type="text" id="{{prefix}}sampleID" class="form-control" placeholder="HG01881,HG00101 ..." on-keyup="calculateFilters">

                                        <label>Analysis Type</label>
                                        <input type="text" id="{{prefix}}analysisType" class="form-control" placeholder="Duo, Family ..." on-keyup="calculateFilters">
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>

            <div class="col-md-9">

                <br>
                <opencga-active-filters opencga-client="{{opencgaClient}}" query="{{query}}" filters="{{config.filters}}"
                                        filter-bioformat="VARIANT" alias="{{activeFilterAlias}}">
                </opencga-active-filters>

                <table class="table hover">
                    <thead>
                        <tr class="active">
                            <th>Select</th>
                            <th>Analysis ID</th>
                            <th>Samples</th>
                            <th>Analysis type</th>
                            <th>Date</th>
                            <th>Filter</th>
                        </tr>
                    </thead>
                    <tbody>
                        <template id="{{prefix}}analysisTableTemplate" is="dom-repeat" items="{{analysis}}" as="item" >
                            <tr>
                                <td><input type="radio" name="radioAnalysis"></td>
                                <td>{{item.analysisID}}</td>
                                <td>{{item.analysisSamples}}</td>
                                <td>{{item.analysisType}}</td>
                                <td>{{item.analysisDate}}</td>
                                <td>{{item.analysisFilter}}</td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>
        </div>
    </template>

    <script>
        Polymer({
            is: 'variant-analysis-selector',
            properties: {
                opencgaClient: {
                    type: Object
                },
                analysis: {
                    type: Array,
                }

            },
            ready: function() {
                if (typeof this.prefix === "undefined" || this.prefix == "") {
                    this.prefix = "anSelector" + Utils.randomString(6);
                }
            }
        });

    </script>
</dom-module>