<!--
  ~ Copyright 2015 OpenCB
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<dom-module id="variant-analysis-upload">

    <template>
        <style is="custom-style" include="jso-styles"></style>
        <!--<style>-->
            <!--.center {-->
                <!--margin: auto;-->
                <!--text-align: justify;-->
                <!--font-size: 18px;-->
                <!--color: #797979;-->
            <!--}-->
        <!--</style>-->

        <!-- This is where main application is rendered -->
        <div class="col-md-4">
            <h3>Upload and check file</h3>
            <br>

            <form class="form-horizontal" data-toggle="validator" role="form">
                <div class="form-group has-feedback">
                    <label for="hospital" class="col-sm-3 control-label">Hospital</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="hospital" placeholder="Virgen del Rocio" maxlength="75" required>
                    </div>
                </div>
                <div class="form-group" has-feedback>
                    <label for="physician" class="col-sm-3 control-label">Physician</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="physician" placeholder="Dr JesÃºs Florido" pattern="^[A-z]{1,}$" maxlength="75" required>
                    </div>
                    <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                    <div class="help-block with-errors">Hey look, this one has feedback icons!</div>
                </div>
                <div class="form-group">
                    <label for="sampleId" class="col-sm-3 control-label">Sample ID</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="sampleId" placeholder="ID">
                    </div>
                </div>
                <div class="form-group">
                    <label for="chromosomalGenderId" class="col-sm-3 control-label">Chromosomal Gender</label>
                    <div class="col-sm-9">
                        <select class="form-control" id="chromosomalGenderId">
                            <option selected>Choose...</option>
                            <option>46,XX</option>
                            <option>46,XY</option>
                            <option>Other</option>
                            <option>NE</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="yearOfBirthId" class="col-sm-3 control-label">Year of Birth</label>
                    <div class="col-sm-3">
                        <!--<input type="text" class="form-control" id="yearOfBirthId" placeholder="2017">-->
                        <select class="form-control" id="yearOfBirthId">
                            <option selected>Choose...</option>
                            <template is="dom-repeat" items="[[_arrayBirthTest]]">
                                <option>[[item]]</option>
                            </template>
                        </select>

                    </div>
                    <label for="yearOfTestId" class="col-sm-3 control-label">Year of Test</label>
                    <div class="col-sm-3">
                        <!--<input type="text" class="form-control" id="yearOfTestId" placeholder="2017">-->
                        <select class="form-control" id="yearOfTestId">
                            <option selected>Choose...</option>
                            <template is="dom-repeat" items="[[_arrayBirthTest]]">
                                <option>[[item]]</option>
                            </template>
                        </select>
                    </div>


                </div>
                <div class="form-group">
                    <label for="ageId" class="col-sm-3 control-label">Age</label>
                    <div class="col-sm-3">
                        <!--<input type="number" class="form-control" id="ageId" placeholder="years" pattern="^[0-9]{1,3}$" maxlength="3" data-error="Error, chaval" required>-->
                        <select class="form-control" id="ageId">
                            <option selected>Choose...</option>
                            <template is="dom-repeat" items="[[_arrayAge]]">
                                <option>[[item]]</option>
                            </template>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="ethnicity" class="col-sm-3 control-label">Ethnicity</label>
                    <div class="col-sm-9">
                        <select class="form-control" id="ethnicity">
                            <option selected>Choose...</option>
                            <option>white mediterranean</option>
                            <option>white caucasian</option>
                            <option>black</option>
                            <option>asiatic</option>
                            <option>amerindian</option>
                            <option>gipsy</option>
                            <option>arabic</option>
                            <option>hindu</option>
                            <option>australian native</option>
                            <option>askenazi jew</option>
                            <option>sefardi jew</option>
                            <option>NE/unkown</option>
                        </select>
                    </div>
                </div>
                <div class="form-inline">
                    <label class="col-sm-3 control-label">Parental Consanguinity</label>
                    <div class="col-sm-9">
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input class="form-check-input" type="radio" name="parentalConsanguinityOptions" id="parentalConsanguinityYes"> yes
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input class="form-check-input" type="radio" name="parentalConsanguinityOptions" id="parentalConsanguinityNo"> no
                            </label>
                        </div>
                    </div>
                </div>


                <div class="form-group">
                    <!-- See http://js.nicdn.de/bootstrap/formhelpers/docs/country.html -->
                    <!-- https://github.com/benkeen/country-region-selector -->
                    <label for="birthPlaceCountry" class="col-sm-3 control-label">Birth place country</label>
                    <div class="col-sm-4">
                        <select class="form-control bfh-countries" data-country="Spain" id="birthPlaceCountry"></select>
                    </div>
                    <label for="birthPlace" class="col-sm-2 control-label">Birth place</label>
                    <div class="col-sm-3">
                        <select class="form-control bfh-countries" data-country="Spain" id="birthPlace"></select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="status" class="col-sm-3 control-label">Status</label>
                    <div class="col-sm-9">
                        <select class="form-control" id="status">
                            <option selected>Choose...</option>
                            <option>affected</option>
                            <option>parent</option>
                            <option>obligate carrier chr X</option>
                            <option>obligate carrier chr 1-22</option>
                            <option>relative (of an affected individual and different parents)</option>
                            <option>healthy control</option>
                            <option>unknown</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="sampleType" class="col-sm-3 control-label">Type of sample</label>
                    <div class="col-sm-9">
                        <select class="form-control" id="sampleType">
                            <option selected>Choose...</option>
                            <option>blood</option>
                            <option>amniotic fluid</option>
                            <option>chorionic villi</option>
                            <option>circulating fetal</option>
                            <option>circulating tumor</option>
                            <option>tissue (fresh)</option>
                            <option>other fluids</option>
                            <option>NE/Unknown</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Cell line</label>
                    <div class="col-sm-9">
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input class="form-check-input" type="radio" name="cellLineOptions" id="germline"> Constitutive (germline)
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input class="form-check-input" type="radio" name="cellLineOptions" id="somatic"> Somatic
                            </label>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="diagnosis" class="col-sm-3 control-label">Diagnosis</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="diagnosis" placeholder="disease" readonly>
                    </div>
                    <div class="col-sm-1">
                        <a style="cursor: pointer">
                            <span class="fa fa-search" aria-hidden="true"></span>
                        </a>
                    </div>
                </div>
                <div class="form-group">
                    <label for="hpo" class="col-sm-3 control-label">HPO</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="hpo" placeholder="hpo terms" readonly>
                    </div>
                    <div class="col-sm-1">
                        <a style="cursor: pointer">
                            <span class="fa fa-search" aria-hidden="true"></span>
                        </a>
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputFile" class="col-sm-3 control-label">VCF or gVCF file</label>
                    <div class="col-sm-9">
                        <input type="file" class="file" id="FileToUpload">
                        <div class="input-group">
                            <input type="text" class="form-control" id="inputFile">
                            <span class="input-group-btn">
                                    <button class="browse btn btn-primary" type="button">...</button>
                            </span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="technicalData" class="col-sm-3 control-label">Technical data (NGS platform, etc)</label>
                    <div class="col-sm-9">
                        <textarea class="form-control" rows="5" id="technicalData" placeholder="Illumina sequencing..." maxlength="500"></textarea>
                    </div>
                </div>
                <div class="form-group" style="float: right;">
                    <div class="offset-sm-2 col-sm-10">
                        <button type="submit" class="btn btn-primary">Upload and check sample</button>
                    </div>
                </div>
            </form>

        </div>
    </template>

    <script>
        Polymer({
            is: 'variant-analysis-upload',
            properties: {
                maxAge: {
                    type: Number,
                    value: 110
                },
                minYear: {
                    type: Number,
                    value: 1900
                },
                _arrayAge: {
                    type: Array ,
                    value: [],
                    computed: '_numberToArray(maxAge,"age")'
                },
                _arrayBirthTest: {
                    type: Array ,
                    value: [],
                    computed: '_numberToArray(minYear,"year")'
                }
            },
            _numberToArray: function(number,type) {
                //console.log(number);
                //debugger;

                let array = [],i;
                if (type == "age") { // Fill array with values related to age up to number
                    array.push(0.2); // For less than 1 year: 0.2 or 0.8
                    array.push(0.8);
                    for (i = 1; i <= number; ++i) {
                        array.push(i);
                    }

                }
                else { // Fill array with values related to years starting at number up to current year
                    let fullDate = new Date()
                    for (i = number; i <= fullDate.getFullYear(); ++i) {
                        array.push(i);
                    }

                }
                return array;
            },

        });

    </script>
</dom-module>