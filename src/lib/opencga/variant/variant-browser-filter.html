<!--
  ~ Copyright 2015 OpenCB
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<link rel="import" href="../../../../../../bower_components/paper-slider/paper-slider.html">
<dom-module id="variant-browser-filter">
    <template>
        <style is="custom-style" include="jso-styles iron-flex iron-flex-reverse iron-flex-alignment iron-flex-factors iron-positioning">
        paper-slider::shadow #input {
                width: calc(20vh - 40px);
                font-size: 13px;
            }

            select {
                height: 20px;
                width: 45px;
                align-self: center;
            }

            .name {
                font-size: 12px;
                color: #797979;
            }

            .popus {
                font-size: 12px;
                font-weight: bold;
                cursor: pointer;
            }
        }
        </style>

        <div>
            <br>
            <div>
                <button type="button" class="btn btn-default" on-click="fireFilter">
                    <i class="fa fa-filter" aria-hidden="true"></i>
                </button>
                <button type="button" class="btn btn-default" on-click="fireClear">Clear</button>
                <button type="button" class="btn btn-default" on-click="fireSearch">Search</button>
            </div>
            <br>

            <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                <!--Study filter-->
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="studyFilterHeading">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#studyFilter" aria-expanded="false" aria-controls="studyFilter">
                                Study Filter
                            </a>
                        </h4>
                    </div>
                    <div id="studyFilter" class="panel-collapse collapse" role="tabpanel" aria-labelledby="studyFilterHeading">
                        <div class="panel-body">
                            <template is="dom-repeat" items="{{studies}}">
                                <input type="radio" name="study" value="{{item.name}}" on-click="studySelected" data-id="{{item.id}}"> {{item.name}}
                                <br>
                            </template>
                        </div>
                    </div>
                </div>

                <!--Segregation filter-->
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingOne">
                        <h4 class="panel-title">
                            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#segregation" aria-expanded="true" aria-controls="segregation">
                                Segregation
                            </a>
                        </h4>
                    </div>
                    <div id="segregation" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                        <div class="panel-body">
                            <form class="form-inline" role="form">
                                <label>Sample:</label>
                                <template is="dom-repeat" items="{{segregation}}">
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox"> {{item}}
                                        </label>
                                    </div>
                                </template>
                            </form>
                        </div>
                    </div>
                </div>

                <!--Somatic filter-->
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingTwo">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#somaticFilter" aria-expanded="false" aria-controls="somaticFilter">
                                Somatic Filter
                            </a>
                        </h4>
                    </div>
                    <div id="somaticFilter" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                        <div class="panel-body">
                            <template is="dom-repeat" items="{{somaticValues}}">
                                <input type="radio" name="study" value="{{item}}"> {{item}}
                            </template>
                        </div>
                    </div>
                </div>

                <!--Position filter-->
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingThree">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#position" aria-expanded="false" aria-controls="position">
                                Position
                            </a>
                        </h4>
                    </div>
                    <div id="position" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
                        <div class="panel-body">
                            Chromosomal Location:
                            <textarea id="locationTextarea" class="form-control clearable" rows="3" placeholder="3:444-55555, 1:1-1000000"></textarea>
                            Import from BED:
                            <button type="button" class="btn btn-xs" on-click="">Import</button>
                            <br>
                            <br> Gene or SNPId:
                            <textarea id="geneSnpTextarea" class="form-control clearable" rows="3" placeholder="BRCA2, PPL or rs666, rs9988179"></textarea>
                        </div>
                    </div>
                </div>

                <!--Type filter-->
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingFour">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#type" aria-expanded="false" aria-controls="type">
                                Type
                            </a>
                        </h4>
                    </div>
                    <div id="type" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
                        <div class="panel-body">
                            <div>
                                <label class="checkbox-inline">
                                    <input type="checkbox" value="SNV,SNP"> SNV
                                </label>
                                <label class="checkbox-inline">
                                    <input type="checkbox" value="MNV"> MNV
                                </label>
                            </div>
                            <div>
                                <label class="checkbox-inline">
                                    <input type="checkbox" value="CNV"> CNV
                                </label>
                                <label class="checkbox-inline">
                                    <input type="checkbox" value="SV"> SV
                                </label>
                            </div>
                            <div>
                                <label class="checkbox-inline">
                                    <input type="checkbox" value="INDEL"> INDEL
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!--Population Frequency filter-->
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingFive">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#populationFrequency" aria-expanded="false" aria-controls="populationFrequency">
                                Population Frequency
                            </a>
                        </h4>
                    </div>
                    <div id="populationFrequency" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive">
                        <div class="panel-body">
                            <i class$="{{phase_1}}" on-click="handleCollapseAction" data-type="phase_1"></i>
                            <label class="popus" on-click="handleCollapseAction" data-type="phase_1"> 1000 Genomes population phase 1</label>
                            <div id="phase_1" hidden>
                                <label class="name">All populations MAF [ALL]</label>
                                <div class="horizontal layout">
                                    <select name="1000GENOMES_phase_1_ALL_op" id="1000GENOMES_phase_1_ALL_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="1000GENOMES_phase_1_ALL" editable></paper-slider>
                                </div>
                                <label class="name">American MAF [AMR]</label>
                                <div class="horizontal layout">
                                    <select name="1000GENOMES_phase_1_AMR_op" id="1000GENOMES_phase_1_AMR_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="1000GENOMES_phase_1_AMR" editable></paper-slider>
                                </div>
                                <label class="name">Asian MAF [ASN]</label>
                                <div class="horizontal layout">
                                    <select name="1000GENOMES_phase_1_ASN_op" id="1000GENOMES_phase_1_ASN_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="1000GENOMES_phase_1_ASN" editable></paper-slider>
                                </div>
                                <label class="name">African MAF [AFR]</label>
                                <div class="horizontal layout">
                                    <select name="1000GENOMES_phase_1_AFR_op" id="1000GENOMES_phase_1_AFR_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="1000GENOMES_phase_1_AFR" editable></paper-slider>
                                </div>
                                <label class="name">European MAF [EUR]</label>
                                <div class="horizontal layout">
                                    <select name="1000GENOMES_phase_1_EUR_op" id="1000GENOMES_phase_1_EUR_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="1000GENOMES_phase_1_EUR" editable></paper-slider>
                                </div>
                            </div>
                            <br>
                            <i class$="{{phase_3}}" on-click="handleCollapseAction" data-type="phase_3"></i>
                            <label class="popus" on-click="handleCollapseAction" data-type="phase_3">1000 Genomes population phase 3</label>
                            <div id="phase_3" hidden>
                                <label class="name">All populations MAF [ALL]</label>
                                <div class="horizontal layout">
                                    <select name="1000GENOMES_phase_3_ALL_op" id="1000GENOMES_phase_3_ALL_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="1000GENOMES_phase_3_ALL" editable></paper-slider>
                                </div>
                                <label class="name">American MAF [AMR]</label>
                                <div class="horizontal layout">
                                    <select name="1000GENOMES_phase_3_AMR_op" id="1000GENOMES_phase_3_AMR_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="1000GENOMES_phase_3_AMR" editable></paper-slider>
                                </div>
                                <label class="name">South Asian MAF [SAS]</label>
                                <div class="horizontal layout">
                                    <select name="1000GENOMES_phase_3_SAS_op" id="1000GENOMES_phase_3_SAS_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="1000GENOMES_phase_3_SAS" editable></paper-slider>
                                </div>
                                <label class="name">East Asian MAF [EAS]</label>
                                <div class="horizontal layout">
                                    <select name="1000GENOMES_phase_3_EAS_op" id="1000GENOMES_phase_3_EAS_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="1000GENOMES_phase_3_EAS" editable></paper-slider>
                                </div>
                                <label class="name">African MAF [AFR]</label>
                                <div class="horizontal layout">
                                    <select name="1000GENOMES_phase_3_AFR_op" id="1000GENOMES_phase_3_AFR_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="1000GENOMES_phase_3_AFR" editable></paper-slider>
                                </div>
                                <label class="name">European MAF [EUR]</label>
                                <div class="horizontal layout">
                                    <select name="1000GENOMES_phase_3_EUR_op" id="1000GENOMES_phase_3_EUR_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="1000GENOMES_phase_3_EUR" editable></paper-slider>
                                </div>
                            </div>
                            <br>
                            <i class$="{{esp_6500}}" on-click="handleCollapseAction" data-type="esp_6500"></i>
                            <label class="popus" on-click="handleCollapseAction" data-type="esp_6500">ESP 6500</label>
                            <div id="esp_6500" hidden>
                                <label class="name">European american MAF</label>
                                <div class="horizontal layout">
                                    <select name="ESP_6500_EA_op" id="ESP_6500_EA_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="ESP_6500_EA" editable></paper-slider>
                                </div>
                                <label class="name">African american MAF</label>
                                <div class="horizontal layout">
                                    <select name="ESP_6500_AA_op" id="ESP_6500_AA_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="ESP_6500_AA" editable></paper-slider>
                                </div>
                            </div>
                            <br>
                            <i class$="{{exac}}" on-click="handleCollapseAction" data-type="exac"></i>
                            <label class="popus" on-click="handleCollapseAction" data-type="exac">EXAC</label>
                            <div id="exac" hidden>
                                <label class="name">EXAC MAF</label>
                                <div class="horizontal layout">
                                    <select name="EXAC_ALL_op" id="EXAC_ALL_op">
                                        <option value="<" selected>
                                            <</option>
                                                <option value="<=">
                                                    <=</option>
                                                        <option value=">">></option>
                                                        <option value=">=">>=</option>
                                    </select>
                                    <paper-slider pin min="0" max="1" step="0.0000001" on-value-change="sliderChange" value="0" id="EXAC_ALL" editable></paper-slider>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--Protein Substitution Scores filter-->
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingSix">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#proteinSubstitutionScore" aria-expanded="false" aria-controls="proteinSubstitutionScore">
                                Protein Substitution Score
                            </a>
                        </h4>
                    </div>
                    <div id="proteinSubstitutionScore" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSix">
                        <div class="panel-body">
                            <textarea id="bierAppProteinSubstitutionScoreTextarea" class="form-control clearable" rows="3"></textarea>
                        </div>
                    </div>
                </div>

                <!--Conservation Scores filter-->
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingSeven">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#conservation" aria-expanded="false" aria-controls="conservation">
                                Conservation
                            </a>
                        </h4>
                    </div>
                    <div id="conservation" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSeven">
                        <div class="panel-body">
                            <textarea id="bierAppConservationTextarea" class="form-control clearable" rows="3"></textarea>
                        </div>
                    </div>
                </div>

                <!--Consequence Type filter-->
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingEight">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#consequenceType" aria-expanded="false" aria-controls="consequenceType">
                                Consequence Type
                            </a>
                        </h4>
                    </div>
                    <div id="consequenceType" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingEight">
                        <div class="panel-body">
                            Consequence Type
                        </div>
                    </div>
                </div>

                <!-- Gene Ontology filter-->
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingNine">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#geneOntology" aria-expanded="false" aria-controls="geneOntology">
                                Gene Ontology
                            </a>
                        </h4>
                    </div>
                    <div id="geneOntology" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingNine">
                        <div class="panel-body">
                            <textarea id="bierAppGeneOntologyTextarea" class="form-control clearable" rows="3" placeholder="GO:0000001, GO:0001177"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Human Phenotype Ontology filter-->
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingTen">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#humanPhenotypeOntology" aria-expanded="false" aria-controls="humanPhenotypeOntology">
                                Human Phenotype Ontology
                            </a>
                        </h4>
                    </div>
                    <div id="humanPhenotypeOntology" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTen">
                        <div class="panel-body">
                            <textarea id="bierAppHumanPhenotypeOntologyTextarea" class="form-control clearable" rows="3" placeholder="HP:0000001, HP:3000079"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>
    <script>
        Polymer({
            is: 'variant-browser-filter',
            properties: {
                studies: {
                    type: Array,
                    value: []
                },
                study: {
                    type: String,
                    notify: true
                },
                opencgaClient: {
                    type: Object
                },
                segregation: {
                    type: Array,
                    value: ["0/0", "0/1", "1/1", "./."]
                },
                phase_1: {
                    type: String,
                    value: "fa fa-angle-double-right minus"
                },
                phase_3: {
                    type: String,
                    value: "fa fa-angle-double-right minus"
                },
                esp_6500: {
                    type: String,
                    value: "fa fa-angle-double-right minus"
                },
                exac: {
                    type: String,
                    value: "fa fa-angle-double-right minus"
                },
            },
            studySelected: function(e) {
                console.log(e)
                if (typeof e.target === "undefined") {
                    this.study = e;
                } else {
                    this.study = e.target.dataId;
                }
                console.log("study:", this.study);
            },
            sliderChange: function(e) {
                var id = e.currentTarget.id + "Value";
                this.set(id, e.currentTarget.value);
            },
            handleCollapseAction: function(e) {
                var id = e.currentTarget.dataset.type;
                this.$[id].hidden = !this.$[id].hidden;
                if (this.$[id].hidden) {
                    this[id] = "fa fa-angle-double-right minus";
                } else {
                    this[id] = "fa fa-angle-double-down minus";
                }
            },
            fireClear: function() {

            },
            fireFilter: function() {

            },
            fireSearch: function() {

            }
        });
    </script>
</dom-module>
